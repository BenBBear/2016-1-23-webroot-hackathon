<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
<title>The point of no return  </title>
<link rel="stylesheet" href="http://ae.koroglu.org/wp-content/themes/erdinc.info/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://ae.koroglu.org/feed/" />
<link rel="alternate" type="text/xml" title="RSS .92" href="http://ae.koroglu.org/feed/rss/" />
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="http://ae.koroglu.org/feed/atom/" />
<link rel="pingback" href="http://ae.koroglu.org/xmlrpc.php" />
<link rel="shortcut icon" type="image/x-icon" href="http://ae.koroglu.org/favicon.ico">

<!-- BEGIN Metadata added by Add-Meta-Tags WordPress plugin -->
<meta name="description" content="Ali Erdinç Köroğlu\&#039;s official website.. 13+ years of experience in Linux development, system+network and database design, integration, migration, consulting, administration, leading and management activities across a number of Governmental departments and important companies in Turkey and Northern Cyprus." />
<meta name="keywords" content="erdinç, erdinc, ali erdinç köroğlu, ali erdinc koroglu" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="The point of no return" />
<meta property="og:title" content="The point of no return" />
<meta property="og:url" content="http://ae.koroglu.org/" />
<meta property="og:description" content="Ali Erdinç Köroğlu\&#039;s official website.. 13+ years of experience in Linux development, system+network and database design, integration, migration, consulting, administration, leading and management activities across a number of Governmental departments and important companies in Turkey and Northern Cyprus." />
<meta property="og:locale" content="en_US" />
<!-- END Metadata added by Add-Meta-Tags WordPress plugin -->


	  		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/ae.koroglu.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.3.1"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='ppss_style-css'  href='http://ae.koroglu.org/wp-content/plugins/pagepost-specific-social-share-buttons/ppss_style.css?ver=4.3.1' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://ae.koroglu.org/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.3' type='text/css' media='all' />
<link rel='stylesheet' id='wp-lightbox-2.min.css-css'  href='http://ae.koroglu.org/wp-content/plugins/wp-lightbox-2/styles/lightbox.min.css?ver=1.3.4' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://ae.koroglu.org/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<!-- This site uses the Google Analytics by Yoast plugin v5.4.6 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-1415502-4', 'auto');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->
<script type='text/javascript' src='http://ae.koroglu.org/wp-includes/js/jquery/jquery.js?ver=1.11.3'></script>
<script type='text/javascript' src='http://ae.koroglu.org/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://ae.koroglu.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://ae.koroglu.org/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.3.1" />


<!-- Facebook Like Thumbnail -->
<link rel="image_src" href="/upl/cesi1_2300271214.png" />
<!-- End Facebook Like Thumbnail -->

	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>
<body>
<div id="container">

<div id="blog_name"><a href="http://ae.koroglu.org">The point of no return</a></div>
	<div id="menu_view">
		<ul>
		<li><a href="http://ae.koroglu.org">Home</a></li>
		        <li class="page_item"><a href="http://ae.koroglu.org/docs/">Docs</a></li>
        <li class="page_item"><a href="http://ae.koroglu.org/music/">Music</a></li>
        <li class="page_item"><a href="http://ae.koroglu.org/contact/">Contact</a></li>
		</ul>
	</div>
    <h1 id="header"></h1>
    <div id="middie">
	<div id="wrapper">
		<div id="content">

<div class="postby"> </div>

				<div class="post" id="post-1355">
                        <div class="baslik">
						<h2><a href="http://ae.koroglu.org/centralized-supervisor-interface-cesi/" rel="bookmark" title="Centralized Supervisor Interface: Cesi">Centralized Supervisor Interface: Cesi</a></h2>
				    		<small>28th December 2014 by Ali Erdinç Köroğlu</small>
                        </div>
			<div class="entry">
				<p>I already mentioned about supervisor in <a href="http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/', 'here');" target="_blank">here</a>. But how about to manage all supervisors from one web interface which has authorization and advanced process management filtering? As you know Supervisord provides a basic web interface to monitor and restart your processes where supervisor installed but XML-RPC interface and API allows you to control remote supervisor and the programs it runs. So it&#8217;s possible.. One UI to rule them all..</p>
<p>Here is <a href="https://github.com/Gamegos/cesi" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/Gamegos/cesi', 'Cesi');" target="_blank">Cesi</a> (<b>Ce</b>ntralized <b>s</b>upervisor <b>i</b>nterface): it&#8217;s a web interface to manage supervisors from single UI, developed by <a href="http://www.gulsahkose.com" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.gulsahkose.com', 'Gülşah Köse');" target="_blank">Gülşah Köse</a> and <a href="http://about.me/kozdincer" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://about.me/kozdincer', 'Kaan Özdinçer');" target="_blank">Kaan Özdinçer</a>.</p>
<h3>Application Dependencies</h3>
<ol>
<li><a href="http://www.python.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.python.org/', 'Python');" target="_blank">Python</a> : a programming language :)</li>
<li><a href="http://flask.pocoo.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://flask.pocoo.org/', 'Flask');" target="_blank">Flask</a> : a microframework for Python</li>
<li><a href="http://www.sqlite.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.sqlite.org/', 'SQlite');" target="_blank">SQlite</a> : a self-contained, serverless, zero-configuration, transactional SQL database engine</li>
</ol>
<p>I&#8217;ll cover everything step by step for CentOS7 minimal installation..<br />
Since Flask is not in CentOS7 or EPEL repositories, I&#8217;ll install it via pip. So what is pip? Pip is a tool for installing and managing Python packages from <a href="https://pypi.python.org/pypi" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://pypi.python.org/pypi', 'Python Package Index');" target="_blank">Python Package Index</a> repository. We also need <a href="http://git-scm.com/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://git-scm.com/', 'Git');" target="_blank">Git</a> (for cesi) and <a href="http://nginx.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://nginx.org/', 'Nginx');" target="_blank">Nginx</a> (you can get nginx from EPEL or from <a href="http://nginx.org/packages/centos/7/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://nginx.org/packages/centos/7/', 'official Nginx repository');" target="_blank">official Nginx repository</a>)</p>
<p>Required CentOS packages</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord ~<span style="color: #009900;">&#93;</span># yum install python<span style="color: #339933;">-</span>pip sqlite git nginx</pre></td></tr></table></div>

<p>Flask installation</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord ~<span style="color: #009900;">&#93;</span># pip install flask</pre></td></tr></table></div>

<p>Getting a clone from github</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord ~<span style="color: #009900;">&#93;</span># cd <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord opt<span style="color: #009900;">&#93;</span># git clone https<span style="color: #339933;">:</span><span style="color: #339933;">//</span>github<span style="color: #339933;">.</span>com<span style="color: #339933;">/</span>Gamegos<span style="color: #339933;">/</span>cesi</pre></td></tr></table></div>

<p>Initial database operations</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord cesi<span style="color: #009900;">&#93;</span># sqlite3 <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>userinfo<span style="color: #339933;">.</span>db <span style="color: #339933;">&lt;</span> userinfo<span style="color: #339933;">.</span>sql</pre></td></tr></table></div>

<p>Conf file should be in /etc</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord cesi<span style="color: #009900;">&#93;</span># mv <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>cesi<span style="color: #339933;">.</span>conf <span style="color: #339933;">/</span>etc</pre></td></tr></table></div>

<p>Let us define some remote supervisors</p>

<div class="wp_syntax"><table><caption>/etc/cesi.conf</caption><tr><td class="code"><pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>node:srv4<span style="">&#93;</span></span>
<span style="color: #000099;">username</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> superv</span>
<span style="color: #000099;">password</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> superv1q2w3e</span>
<span style="color: #000099;">host</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> 192.168.9.4</span>
<span style="color: #000099;">port</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> 9001</span>
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>node:srv10<span style="">&#93;</span></span>
<span style="color: #000099;">username</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> superv</span>
<span style="color: #000099;">password</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> superv</span>
<span style="color: #000099;">host</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> 192.168.9.10</span>
<span style="color: #000099;">port</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> 9001</span>
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>environment:glassfish<span style="">&#93;</span></span>
<span style="color: #000099;">members</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> srv4, srv10</span>
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>cesi<span style="">&#93;</span></span>
<span style="color: #000099;">database</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> /root/cesi/cesi/userinfo.db</span>
<span style="color: #000099;">activity_log</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> /root/cesi/cesi/cesi_activity.log</span></pre></td></tr></table></div>

<p>Since cesi will run by nginx user /opt/cesi should be accessible for it</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord opt<span style="color: #009900;">&#93;</span># chown <span style="color: #339933;">-</span>R nginx<span style="color: #339933;">:</span>nginx <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>cesi</pre></td></tr></table></div>

<p>We&#8217;ll run cesi via supervisord :)</p>

<div class="wp_syntax"><table><caption>/etc/supervisor.d/cesi.ini</caption><tr><td class="code"><pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>program:cesi<span style="">&#93;</span></span>
<span style="color: #000099;">command</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/bin/python /opt/cesi/cesi/web.py</span>
<span style="color: #000099;">process_name</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">%<span style="">&#40;</span>program_name<span style="">&#41;</span>s</span>
<span style="color: #000099;">user</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">nginx</span>
<span style="color: #000099;">autostart</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">true</span>
<span style="color: #000099;">autorestart</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">true</span>
<span style="color: #000099;">redirect_stderr</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">true</span>
<span style="color: #000099;">stdout_logfile</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/var/log/cesi-stdout.log</span>
<span style="color: #000099;">stdout_logfile_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1MB</span>
<span style="color: #000099;">stdout_logfile_backups</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">10</span>
<span style="color: #000099;">stdout_capture_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1MB</span>
<span style="color: #000099;">stdout_events_enabled</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">false</span>
<span style="color: #000099;">stderr_logfile</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/var/log/cesi-stderr.log</span>
<span style="color: #000099;">stderr_logfile_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1MB</span>
<span style="color: #000099;">stderr_logfile_backups</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">10</span>
<span style="color: #000099;">stderr_capture_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1MB</span>
<span style="color: #000099;">stderr_events_enabled</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">false</span></pre></td></tr></table></div>

<p>Flask will initialise twice the application in debug mode and when you try to stop via supervisord it will not stop.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;">root     <span style="color: #800080;">17614</span>  <span style="color: #800080;">0.0</span>  <span style="color: #800080;">0.3</span> <span style="color: #800080;">227168</span> <span style="color: #800080;">12632</span> ?        Ss   <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">05</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">00</span> <span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>python <span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>supervisord
nginx    <span style="color: #800080;">17723</span>  <span style="color: #800080;">6.5</span>  <span style="color: #800080;">0.4</span> <span style="color: #800080;">235768</span> <span style="color: #800080;">16684</span> ?        S    <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">36</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">00</span> <span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>python <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>web<span style="color: #339933;">.</span>py
nginx    <span style="color: #800080;">17728</span>  <span style="color: #800080;">6.5</span>  <span style="color: #800080;">0.4</span> <span style="color: #800080;">309592</span> <span style="color: #800080;">16936</span> ?        Sl   <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">36</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">00</span> <span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>python <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>web<span style="color: #339933;">.</span>py
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord cesi<span style="color: #009900;">&#93;</span># supervisorctl stop cesi
cesi<span style="color: #339933;">:</span> stopped
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord cesi<span style="color: #009900;">&#93;</span># ps aux
<span style="color: #339933;">.</span>
<span style="color: #339933;">.</span>
root     <span style="color: #800080;">17614</span>  <span style="color: #800080;">0.0</span>  <span style="color: #800080;">0.3</span> <span style="color: #800080;">227320</span> <span style="color: #800080;">12664</span> ?        Ss   <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">05</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">00</span> <span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>python <span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>supervisord
nginx    <span style="color: #800080;">17728</span>  <span style="color: #800080;">0.5</span>  <span style="color: #800080;">0.4</span> <span style="color: #800080;">309592</span> <span style="color: #800080;">16936</span> ?        Sl   <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">36</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">01</span> <span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>python <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>web<span style="color: #339933;">.</span>py
root     <span style="color: #800080;">17738</span>  <span style="color: #800080;">0.0</span>  <span style="color: #800080;">0.0</span> <span style="color: #800080;">123356</span>  <span style="color: #800080;">1380</span> pts<span style="color: #339933;">/</span><span style="color: #800080;">0</span>    R<span style="color: #339933;">+</span>   <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">40</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">00</span> ps aux
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord cesi<span style="color: #009900;">&#93;</span># supervisorctl stop cesi
cesi<span style="color: #339933;">:</span> ERROR <span style="color: #009900;">&#40;</span>not running<span style="color: #009900;">&#41;</span></pre></td></tr></table></div>

<p>As you see it&#8217;s not stopped, so simplest thing would be to change use_reloader in web.py</p>

<div class="wp_syntax"><table><caption>/opt/cesi/cesi/web.py</caption><tr><td class="code"><pre class="diff" style="font-family:monospace;"><span style="color: #888822;">--- web.py.org	2014-12-27 21:23:37.625143414 +0200</span>
<span style="color: #888822;">+++ web.py	2014-12-27 21:23:48.222118215 +0200</span>
<span style="color: #440088;">@@ -531,7 +531,7 @@</span>
&nbsp;
 try:
     if __name__ == '__main__':
<span style="color: #991111;">-        app.run<span style="">&#40;</span>debug=True, use_reloader=True<span style="">&#41;</span></span>
<span style="color: #00b000;">+        app.run<span style="">&#40;</span>debug=True, use_reloader=False<span style="">&#41;</span></span>
 except xmlrpclib.Fault as err:
     print &quot;A fault occurred&quot;
     print &quot;Fault code: %d&quot; % err.faultCode</pre></td></tr></table></div>

<p>Working like a charm..</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord cesi<span style="color: #009900;">&#93;</span># supervisorctl start cesi
cesi<span style="color: #339933;">:</span> started
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord cesi<span style="color: #009900;">&#93;</span># ps aux<span style="color: #339933;">|</span> grep cesi
nginx    <span style="color: #800080;">17704</span>  <span style="color: #800080;">0.2</span>  <span style="color: #800080;">0.4</span> <span style="color: #800080;">237048</span> <span style="color: #800080;">18232</span> ?        S    <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">30</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">00</span> <span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>python <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>cesi<span style="color: #339933;">/</span>web<span style="color: #339933;">.</span>py</pre></td></tr></table></div>

<p>System side is ok and let us configure the nginx..</p>

<div class="wp_syntax"><table><caption>/etc/nginx/conf.d/default.conf</caption><tr><td class="code"><pre class="nginx" style="font-family:monospace;"><span style="color: #000066;">server</span> <span style="color: #66cc66;">&#123;</span>
        <span style="color: #000066;">server_name</span> localhost 192.168.9.240 212.213.214.215<span style="color: #66cc66;">;</span>
&nbsp;
        <span style="color: #000066;">location</span> / <span style="color: #66cc66;">&#123;</span>
                <span style="">proxy_set_header</span> Host <span style="color: #000066;">$http_host</span><span style="color: #66cc66;">;</span>
                <span style="">proxy_set_header</span> X-Real-IP <span style="color: #000066;">$remote_addr</span><span style="color: #66cc66;">;</span>
                <span style="">proxy_set_header</span> X-Forwarded-For <span style="color: #000066;">$proxy_add_x_forwarded_for</span><span style="color: #66cc66;">;</span>
                <span style="">proxy_pass</span> <span style="color: #000066;">http</span>://127.0.0.1:<span style="">5000</span><span style="color: #66cc66;">;</span>
        <span style="color: #66cc66;">&#125;</span>
&nbsp;
        <span style="color: #000066;">location</span> /static <span style="color: #66cc66;">&#123;</span>
                <span style="color: #000066;">root</span> /opt/cesi/cesi/<span style="color: #66cc66;">;</span>
        <span style="color: #66cc66;">&#125;</span>
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>Let&#8217;s check TCP sockets</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>supervisord cesi<span style="color: #009900;">&#93;</span># netstat <span style="color: #339933;">-</span>anp<span style="color: #339933;">|</span> grep LISTEN       
tcp        <span style="color: #800080;">0</span>      <span style="color: #800080;">0</span> 127<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>1<span style="color: #339933;">:</span><span style="color: #800080;">5000</span>          0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">:</span><span style="color: #339933;">*</span>               LISTEN      <span style="color: #800080;">17761</span><span style="color: #339933;">/</span>python        
tcp        <span style="color: #800080;">0</span>      <span style="color: #800080;">0</span> 192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>9<span style="color: #339933;">.</span>240<span style="color: #339933;">:</span><span style="color: #800080;">9001</span>      0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">:</span><span style="color: #339933;">*</span>               LISTEN      <span style="color: #800080;">17614</span><span style="color: #339933;">/</span>python        
tcp        <span style="color: #800080;">0</span>      <span style="color: #800080;">0</span> 0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">:</span><span style="color: #800080;">80</span>              0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">:</span><span style="color: #339933;">*</span>               LISTEN      <span style="color: #800080;">17842</span><span style="color: #339933;">/</span>nginx<span style="color: #339933;">:</span> master 
tcp        <span style="color: #800080;">0</span>      <span style="color: #800080;">0</span> 192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>9<span style="color: #339933;">.</span>240<span style="color: #339933;">:</span><span style="color: #800080;">22</span>        0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">:</span><span style="color: #339933;">*</span>               LISTEN      <span style="color: #800080;">852</span><span style="color: #339933;">/</span>sshd</pre></td></tr></table></div>

<p>It&#8217;s time to login..</p>
<p><center><img src="/upl/cesi1_2300271214.png" class="alignnone size-full wp-image-296" /><br />
Login screen</center></p>
<p><center><img src="/upl/cesi2_2300271214.png" class="alignnone size-full wp-image-296" /><br />
Dashboard</center></p>
<p><center><img src="/upl/cesi3_2300271214.png" class="alignnone size-full wp-image-296" /><br />
All supervisors in one screen</center></p>
<p><center><img src="/upl/cesi4_2300271214.png" class="alignnone size-full wp-image-296" /><br />
A node</center></p>
<p><center><img src="/upl/cesi5_2300271214.png" class="alignnone size-full wp-image-296" /><br />
A process log</center></p>
<p>Kudos goes to Gülşah and Kaan and that&#8217;s all folks..</p>
<div class="bottomcontainerBox" style="background-color:transparent;">
			<div style="float:left; width:85px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fae.koroglu.org%2Fcentralized-supervisor-interface-cesi%2F&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font=verdana&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:85px; height:21px;"></iframe></div>
			<div style="float:left; width:80px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<g:plusone size="medium" href="http://ae.koroglu.org/centralized-supervisor-interface-cesi/"></g:plusone>
			</div>
			<div style="float:left; width:95px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<a href="http://twitter.com/share" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share', '');" class="twitter-share-button" data-url="http://ae.koroglu.org/centralized-supervisor-interface-cesi/"  data-text="Centralized Supervisor Interface: Cesi" data-count="horizontal"></a>
			</div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><script type="in/share" data-url="http://ae.koroglu.org/centralized-supervisor-interface-cesi/" data-counter="right"></script></div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><a href="http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/centralized-supervisor-interface-cesi/&media=/upl/cesi1_2300271214.png" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/centralized-supervisor-interface-cesi/&amp;media=/upl/cesi1_2300271214.png', '');" class="pin-it-button" count-layout="horizontal" rel="lightbox[1355]"></a></div>			
			</div><div style="clear:both"></div><div style="padding-bottom:4px;"></div>            </div>

			<p class="postmetadata">
				Posted in <b><a href="http://ae.koroglu.org/category/centos/" rel="category tag">CentOS</a>, <a href="http://ae.koroglu.org/category/linux/" rel="category tag">Linux</a></b>
                <b><a href="http://ae.koroglu.org/centralized-supervisor-interface-cesi/#respond">&raquo; No Comments</a></b>
			</p>
        </div> 
    			<div class="post" id="post-1326">
                        <div class="baslik">
						<h2><a href="http://ae.koroglu.org/a-new-supervisord-plugin-for-nagios/" rel="bookmark" title="A New Supervisord Plugin for Nagios">A New Supervisord Plugin for Nagios</a></h2>
				    		<small>23rd December 2014 by Ali Erdinç Köroğlu</small>
                        </div>
			<div class="entry">
				<p>In my <a href="http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/', 'last entry');" target="_blank">last entry</a> I mentioned about <a href="http://www.supervisord.org" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.supervisord.org', 'Supervisord');" target="_blank">Supervisord</a> and how beautiful it is. While I&#8217;m looking for how to integrate Supervisord to <a href="http://www.nagios.org" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.nagios.org', 'Nagios');" target="_blank">Nagios</a> I couldn&#8217;t find what I&#8217;m looking for so I decided to write a new supervisord plugin for nagios. What I was looking for is a plugin works on Nagios server (so no need to install remote servers) to get information about processes from remote supervisords. So here it is.. <a href="http://exchange.nagios.org/directory/Plugins/Network-and-Systems-Management/check_supervisor/details" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://exchange.nagios.org/directory/Plugins/Network-and-Systems-Management/check_supervisor/details', 'check_supervisor');" target="_blank"><b>check_supervisor</b></a></p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;">Usage<span style="color: #339933;">:</span> check_supervisord<span style="color: #339933;">.</span>py <span style="color: #339933;">-</span>H 192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>1<span style="color: #339933;">.</span>1 <span style="color: #339933;">-</span>P <span style="color: #800080;">9001</span> <span style="color: #339933;">-</span>u superv <span style="color: #339933;">-</span>p superv <span style="color: #339933;">-</span>a glassfish
&nbsp;
Options<span style="color: #339933;">:</span>
  <span style="color: #339933;">-</span>h<span style="color: #339933;">,</span> <span style="color: #339933;">--</span>help     
  <span style="color: #339933;">-</span>H HOSTNAME<span style="color: #339933;">,</span> <span style="color: #339933;">--</span>hostname<span style="color: #339933;">=</span>HOSTNAME <span style="color: #009900;">&#40;</span>Supervisord hostname<span style="color: #009900;">&#41;</span>
  <span style="color: #339933;">-</span>P PORT<span style="color: #339933;">,</span> <span style="color: #339933;">--</span>port<span style="color: #339933;">=</span>PORT <span style="color: #009900;">&#40;</span>Supervisord port<span style="color: #009900;">&#41;</span>
  <span style="color: #339933;">-</span>u USERNAME<span style="color: #339933;">,</span> <span style="color: #339933;">--</span>username<span style="color: #339933;">=</span>USERNAME <span style="color: #009900;">&#40;</span>Supervisord username<span style="color: #009900;">&#41;</span>
  <span style="color: #339933;">-</span>p PASSWORD<span style="color: #339933;">,</span> <span style="color: #339933;">--</span>password<span style="color: #339933;">=</span>PASSWORD <span style="color: #009900;">&#40;</span>Supervisord password<span style="color: #009900;">&#41;</span>
  <span style="color: #339933;">-</span>a PROCNAME<span style="color: #339933;">,</span> <span style="color: #339933;">--</span>process<span style="color: #339933;">-</span>name<span style="color: #339933;">=</span>PROCNAME <span style="color: #009900;">&#40;</span>Process name defined in <span style="color: #339933;">/</span>etc<span style="color: #339933;">/</span>supervisor<span style="color: #339933;">.</span>d<span style="color: #666666; font-style: italic;">/*.ini or supervisorctl status)</span></pre></td></tr></table></div>

<p>Console Output:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>nagios ~<span style="color: #009900;">&#93;</span># <span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>lib64<span style="color: #339933;">/</span>nagios<span style="color: #339933;">/</span>plugins<span style="color: #339933;">/</span>check_supervisord<span style="color: #339933;">.</span>py <span style="color: #339933;">-</span>H 192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>1<span style="color: #339933;">.</span>1 <span style="color: #339933;">-</span>P <span style="color: #800080;">9001</span> <span style="color: #339933;">-</span>u superv <span style="color: #339933;">-</span>p superv <span style="color: #339933;">-</span>a glassfish
glassfish OK<span style="color: #339933;">:</span> <span style="color: #800080;">12</span> day<span style="color: #009900;">&#40;</span>s<span style="color: #009900;">&#41;</span> <span style="color: #800080;">17</span> hour<span style="color: #009900;">&#40;</span>s<span style="color: #009900;">&#41;</span> <span style="color: #800080;">29</span> minute<span style="color: #009900;">&#40;</span>s<span style="color: #009900;">&#41;</span></pre></td></tr></table></div>

<p>You should add the new command definition for check_supervisord into nagios&#8217;s commands.cfg</p>

<div class="wp_syntax"><table><caption>/etc/nagios/objects/commands.cfg</caption><tr><td class="line_numbers"><pre>1
2
3
4
</pre></td><td class="code"><pre class="" style="font-family:monospace;">define command<span class="br0">&#123;</span>
    command_name    check_supervisord
    command_line    $USER1$/check_supervisord.py -H $HOSTADDRESS$ -P $ARG1$ -u $ARG2$ -p $ARG3$ -a $ARG4$
<span class="br0">&#125;</span></pre></td></tr></table></div>

<p>And you can use in a definition like this :)</p>

<div class="wp_syntax"><table><caption>/etc/nagios/conf.d/services/glassfish.cfg</caption><tr><td class="line_numbers"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre class="bash" style="font-family:monospace;">define service <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    use generic-service
    host_name   srv1
    service_description Glassfish
    check_command   check_supervisord<span style="color: #000000; font-weight: bold;">!</span><span style="color: #000000;">9001</span><span style="color: #000000; font-weight: bold;">!</span>superv<span style="color: #000000; font-weight: bold;">!</span>superv<span style="color: #000000; font-weight: bold;">!</span>glassfish
<span style="color: #7a0874; font-weight: bold;">&#125;</span></pre></td></tr></table></div>

<p><center><img src="/upl/23122014_glassfish.png" class="alignnone size-full wp-image-296" /><br />
A screenshot from nagios web interface</center></p>
<div class="bottomcontainerBox" style="background-color:transparent;">
			<div style="float:left; width:85px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fae.koroglu.org%2Fa-new-supervisord-plugin-for-nagios%2F&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font=verdana&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:85px; height:21px;"></iframe></div>
			<div style="float:left; width:80px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<g:plusone size="medium" href="http://ae.koroglu.org/a-new-supervisord-plugin-for-nagios/"></g:plusone>
			</div>
			<div style="float:left; width:95px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<a href="http://twitter.com/share" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share', '');" class="twitter-share-button" data-url="http://ae.koroglu.org/a-new-supervisord-plugin-for-nagios/"  data-text="A New Supervisord Plugin for Nagios" data-count="horizontal"></a>
			</div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><script type="in/share" data-url="http://ae.koroglu.org/a-new-supervisord-plugin-for-nagios/" data-counter="right"></script></div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><a href="http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/a-new-supervisord-plugin-for-nagios/&media=/upl/23122014_glassfish.png" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/a-new-supervisord-plugin-for-nagios/&amp;media=/upl/23122014_glassfish.png', '');" class="pin-it-button" count-layout="horizontal" rel="lightbox[1326]"></a></div>			
			</div><div style="clear:both"></div><div style="padding-bottom:4px;"></div>            </div>

			<p class="postmetadata">
				Posted in <b><a href="http://ae.koroglu.org/category/linux/" rel="category tag">Linux</a></b>
                <b><a href="http://ae.koroglu.org/a-new-supervisord-plugin-for-nagios/#respond">&raquo; No Comments</a></b>
			</p>
        </div> 
    			<div class="post" id="post-1256">
                        <div class="baslik">
						<h2><a href="http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/" rel="bookmark" title="Best Way to Daemonize Applications on Linux">Best Way to Daemonize Applications on Linux</a></h2>
				    		<small>22nd December 2014 by Ali Erdinç Köroğlu</small>
                        </div>
			<div class="entry">
				<p>I tried to explain how to daemonize applications before but how about monitor and even start/stop/restart processes locally or remotely? Well, here is <a href="http://www.supervisord.org" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.supervisord.org', 'Supervisor');" target="_blank">Supervisor</a>. Supervisor is a client/server system that allows its users to monitor and control a number of processes on UNIX-like operating systems.</p>
<p>As you know we need to write <a href="http://en.wikipedia.org/wiki/Init#SYSV" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Init#SYSV', 'rc.d');" target="_blank">rc.d</a> or <a href="http://www.freedesktop.org/wiki/Software/systemd" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.freedesktop.org/wiki/Software/systemd', 'systemd');" target="_blank">systemd</a> scripts for every single process instance. It&#8217;s hard to write and maintain also those scripts are not able to automatically restart a crashed process. So supervisord is the solution, it&#8217;s simple, efficient, centralized, extensible etc.. etc..</p>
<p>Supervisor has two component, supervisord and supervisorctl. Supervisord is the server side of supervisor and is responsible for starting child programs, controlling, logging and handling events. It&#8217;s also providing a web interface to view and control process status and an XML-RPC interface to control supervisor and the programs it runs. Supervisorctl on the otherhand, providing a shell-like interface for connecting to supervisord. But 1st let us install into our CentOS7 server. Supervisor is available on EPEL7 repository, if you don&#8217;t know how to add EPEL repository, please read <a href="http://ae.koroglu.org/docs/adding-epel-repository-on-centos/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ae.koroglu.org/docs/adding-epel-repository-on-centos/', 'this');" target="_blank">this</a>.</p>
<p>Installation is easy</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Neverland ~<span style="color: #009900;">&#93;</span># yum install supervisor</pre></td></tr></table></div>

<p>Please don&#8217;t forget to enable supervisor for systemd</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Neverland ~<span style="color: #009900;">&#93;</span># systemctl enable supervisord</pre></td></tr></table></div>

<p>It begins with a config file :)</p>

<div class="wp_syntax"><table><caption>/etc/supervisor.conf</caption><tr><td class="code"><pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>unix_http_server<span style="">&#93;</span></span>
<span style="color: #000099;">file</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/var/tmp/supervisor.sock</span><span style="color: #666666; font-style: italic;">; (the path to the socket file)</span>
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>inet_http_server<span style="">&#93;</span></span>      <span style="color: #666666; font-style: italic;">; inet (TCP) server disabled by default </span>
<span style="color: #000099;">port</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">192.168.1.1:9001   </span><span style="color: #666666; font-style: italic;">; (ip_address:port specifier, *:port for all iface)</span>
<span style="color: #000099;">username</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">superv         </span><span style="color: #666666; font-style: italic;">; (default is no username (open server))</span>
<span style="color: #000099;">password</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">superv         </span><span style="color: #666666; font-style: italic;">; (default is no password (open server))</span>
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>supervisord<span style="">&#93;</span></span>
<span style="color: #000099;">logfile</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/var/log/supervisor/supervisord.log  </span><span style="color: #666666; font-style: italic;">; (main log file;default $CWD/supervisord.log)</span>
<span style="color: #000099;">logfile_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">50MB       </span><span style="color: #666666; font-style: italic;">; (max main logfile bytes b4 rotation;default 50MB)</span>
<span style="color: #000099;">logfile_backups</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">10          </span><span style="color: #666666; font-style: italic;">; (num of main logfile rotation backups;default 10)</span>
<span style="color: #000099;">loglevel</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">info               </span><span style="color: #666666; font-style: italic;">; (log level;default info; others: debug,warn,trace)</span>
<span style="color: #000099;">pidfile</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/var/run/supervisord.pid </span><span style="color: #666666; font-style: italic;">; (supervisord pidfile;default supervisord.pid)</span>
<span style="color: #000099;">nodaemon</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">false              </span><span style="color: #666666; font-style: italic;">; (start in foreground if true;default false)</span>
<span style="color: #000099;">minfds</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1024                 </span><span style="color: #666666; font-style: italic;">; (min. avail startup file descriptors;default 1024)</span>
<span style="color: #000099;">minprocs</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">200                </span><span style="color: #666666; font-style: italic;">; (min. avail process descriptors;default 200)</span>
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>rpcinterface:supervisor<span style="">&#93;</span></span>
supervisor.rpcinterface_factory<span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">supervisor.rpcinterface:make_main_rpcinterface</span>
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>supervisorctl<span style="">&#93;</span></span>
<span style="color: #000099;">serverurl</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">unix:///var/tmp/supervisor.sock </span><span style="color: #666666; font-style: italic;">; use a unix:// URL  for a unix socket</span>
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>include<span style="">&#93;</span></span>
<span style="color: #000099;">files</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> supervisord.d/*.ini</span></pre></td></tr></table></div>

<p>This process config file includes details such as directory, command, process name, process owner, logging etc. If you wanna know more, please read <a href="http://supervisord.org/configuration.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://supervisord.org/configuration.html', 'this');" target="_blank">this</a>.</p>

<div class="wp_syntax"><table><caption>/etc/supervisor.d/fixtures.ini</caption><tr><td class="code"><pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>program:fixtures<span style="">&#93;</span></span>
<span style="color: #000099;">directory</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/opt/pronet/fixtures</span>
<span style="color: #000099;">command</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/usr/java/jdk1.7.0_71/bin/java -Dfile.encoding=UTF-8 -Dproject.properties=/opt/pronet/fixtures/fixtures.properties -Dlog4j..</span>
<span style="color: #000099;">process_name</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">%<span style="">&#40;</span>program_name<span style="">&#41;</span>s</span>
<span style="color: #000099;">user</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">pronet</span>
<span style="color: #000099;">autostart</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">true</span>
<span style="color: #000099;">autorestart</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">true</span>
<span style="color: #000099;">redirect_stderr</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">true</span>
<span style="color: #000099;">stdout_logfile</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/var/log/pronet/fixtures-stdout.log</span>
<span style="color: #000099;">stdout_logfile_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1MB</span>
<span style="color: #000099;">stdout_logfile_backups</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">10</span>
<span style="color: #000099;">stdout_capture_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1MB</span>
<span style="color: #000099;">stdout_events_enabled</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">false</span>
<span style="color: #000099;">stderr_logfile</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/var/log/pronet/fixtures-stderr.log</span>
<span style="color: #000099;">stderr_logfile_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1MB</span>
<span style="color: #000099;">stderr_logfile_backups</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">10</span>
<span style="color: #000099;">stderr_capture_maxbytes</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">1MB</span>
<span style="color: #000099;">stderr_events_enabled</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">false</span></pre></td></tr></table></div>

<p>So when you start or restart supervisord fixtures process will start or restart too.. (depends on your process config)</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Neverland ~<span style="color: #009900;">&#93;</span># systemctl start supervisord
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Neverland ~<span style="color: #009900;">&#93;</span># supervisorctl status fixtures
fixtures                         RUNNING    pid <span style="color: #800080;">5786</span><span style="color: #339933;">,</span> uptime <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">00</span><span style="color: #339933;">:</span><span style="color: #800080;">03</span></pre></td></tr></table></div>

<p>And you can monitor or control remotely..</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>nagios ~<span style="color: #009900;">&#93;</span># supervisorctl <span style="color: #339933;">-</span>s http<span style="color: #339933;">:</span><span style="color: #339933;">//</span>192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>1<span style="color: #339933;">.</span>1<span style="color: #339933;">:</span><span style="color: #800080;">9001</span> <span style="color: #339933;">-</span>u superv <span style="color: #339933;">-</span>p superv status fixtures
fixtures                         RUNNING    pid <span style="color: #800080;">5786</span><span style="color: #339933;">,</span> uptime <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">04</span><span style="color: #339933;">:</span><span style="color: #800080;">20</span>
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>nagios ~<span style="color: #009900;">&#93;</span># supervisorctl <span style="color: #339933;">-</span>s http<span style="color: #339933;">:</span><span style="color: #339933;">//</span>192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>1<span style="color: #339933;">.</span>1<span style="color: #339933;">:</span><span style="color: #800080;">9001</span> <span style="color: #339933;">-</span>u superv <span style="color: #339933;">-</span>p superv restart fixtures
fixtures<span style="color: #339933;">:</span> stopped
fixtures<span style="color: #339933;">:</span> started</pre></td></tr></table></div>

<p>There are some centralized supervisord web interfaces but I&#8217;ll cover them later :)</p>
<div class="bottomcontainerBox" style="background-color:transparent;">
			<div style="float:left; width:85px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fae.koroglu.org%2Fbest-way-to-daemonize-applications-on-linux%2F&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font=verdana&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:85px; height:21px;"></iframe></div>
			<div style="float:left; width:80px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<g:plusone size="medium" href="http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/"></g:plusone>
			</div>
			<div style="float:left; width:95px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<a href="http://twitter.com/share" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share', '');" class="twitter-share-button" data-url="http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/"  data-text="Best Way to Daemonize Applications on Linux" data-count="horizontal"></a>
			</div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><script type="in/share" data-url="http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/" data-counter="right"></script></div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><a href="http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/&media=" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/&amp;media=', '');" class="pin-it-button" count-layout="horizontal"></a></div>			
			</div><div style="clear:both"></div><div style="padding-bottom:4px;"></div>            </div>

			<p class="postmetadata">
				Posted in <b><a href="http://ae.koroglu.org/category/centos/" rel="category tag">CentOS</a>, <a href="http://ae.koroglu.org/category/linux/" rel="category tag">Linux</a></b>
                <b><a href="http://ae.koroglu.org/best-way-to-daemonize-applications-on-linux/#respond">&raquo; No Comments</a></b>
			</p>
        </div> 
    			<div class="post" id="post-1221">
                        <div class="baslik">
						<h2><a href="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-systemd-centos7rhel7/" rel="bookmark" title="Alternative Way to Daemonize Java Applications on Systemd (CentOS7/RHEL7)">Alternative Way to Daemonize Java Applications on Systemd (CentOS7/RHEL7)</a></h2>
				    		<small>30th October 2014 by Ali Erdinç Köroğlu</small>
                        </div>
			<div class="entry">
				<p>I already explained how to daemonize java applications on SysV-style system in <a href="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/', 'here');" target="_blank">here</a>. Since CentOS7/RHEL7 comes with <a href="http://www.freedesktop.org/wiki/Software/systemd/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.freedesktop.org/wiki/Software/systemd/', 'Systemd');" target="_blank">Systemd</a> which is a system and service manager for Linux we migrate old init scripts to the new system. </p>
<p>Again we&#8217;ll use our best budy <a href="http://software.clapper.org/daemonize/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://software.clapper.org/daemonize/', 'Daemonize');" target="_blank">Daemonize</a> but this time we gonna compile it from source because although it&#8217;s signed as approved on <a href="https://admin.fedoraproject.org/pkgdb/package/daemonize/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://admin.fedoraproject.org/pkgdb/package/daemonize/', 'fedora package db');" target="_blank">fedora package db</a>, Daemonize is not in EPEL7 repository for now. I&#8217;ll not going to details how to compile install etc. but I assume that you installed daemonize into /usr/local/sbin</p>
<p>So we need to create two files /etc/sysconfig/fixtures and /lib/systemd/system/fixtures.service<br />
This 1st file is where we define java releated variables such as user, java path, arguments, log files etc..</p>

<div class="wp_syntax"><table><caption>/etc/sysconfig/fixtures</caption><tr><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #666666; font-style: italic;"># Configz for fixtures service</span>
&nbsp;
<span style="color: #007800;">JAVA_USER</span>=<span style="color: #ff0000;">&quot;pronet&quot;</span>
<span style="color: #007800;">JAVA_STDOUT</span>=<span style="color: #ff0000;">&quot;/var/log/pronet/fixtures.log&quot;</span>
<span style="color: #007800;">JAVA_STDERR</span>=<span style="color: #ff0000;">&quot;/var/log/pronet/fixtures-error.log&quot;</span>
<span style="color: #007800;">JAVA_BIN</span>=<span style="color: #ff0000;">&quot;/usr/java/jdk1.7.0_71/bin/java&quot;</span>
<span style="color: #007800;">JAVA_APPDIR</span>=<span style="color: #ff0000;">&quot;/opt/pronet/fixtures&quot;</span>
<span style="color: #007800;">ARG1</span>=<span style="color: #ff0000;">&quot;-Dfile.encoding=UTF-8 -Dproject.properties=/opt/pronet/fixtures/fixtures.properties&quot;</span>
<span style="color: #007800;">ARG2</span>=<span style="color: #ff0000;">&quot;-Dlog4j.configuration=file:/opt/pronet/fixtures/fixtures-log.properties&quot;</span>
<span style="color: #007800;">ARG3</span>=<span style="color: #ff0000;">&quot;-jar /opt/pronet/fixtures/fixtures.jar&quot;</span></pre></td></tr></table></div>

<p>2nd file is service file for fixtures where we define systemd releted variables. There are plenty of documents in <a href="http://www.freedesktop.org/wiki/Software/systemd/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.freedesktop.org/wiki/Software/systemd/', 'Freedesktop Systemd wiki');" target="_blank">Freedesktop Systemd wiki</a>, if you want to know more about I advice you to read them. But roughly unit: consist information about a service, a socket, a device etc, service: information about a process controlled and supervised by systemd and install: installation information for the unit</p>

<div class="wp_syntax"><table><caption>/lib/systemd/system/fixtures.service</caption><tr><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>Unit<span style="color: #7a0874; font-weight: bold;">&#93;</span>
<span style="color: #007800;">Description</span>=Fixtures Service
<span style="color: #007800;">After</span>=syslog.target
<span style="color: #007800;">After</span>=network.target
&nbsp;
<span style="color: #7a0874; font-weight: bold;">&#91;</span>Service<span style="color: #7a0874; font-weight: bold;">&#93;</span>
<span style="color: #007800;">Type</span>=forking
<span style="color: #007800;">EnvironmentFile</span>=-<span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>sysconfig<span style="color: #000000; font-weight: bold;">/</span>fixtures
<span style="color: #007800;">ExecStart</span>=<span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>local<span style="color: #000000; font-weight: bold;">/</span>sbin<span style="color: #000000; font-weight: bold;">/</span>daemonize <span style="color: #660033;">-u</span> <span style="color: #007800;">$JAVA_USER</span> <span style="color: #660033;">-o</span> <span style="color: #007800;">$JAVA_STDOUT</span> <span style="color: #660033;">-e</span> <span style="color: #007800;">$JAVA_STDERR</span> <span style="color: #660033;">-c</span> <span style="color: #007800;">$JAVA_APPDIR</span> <span style="color: #007800;">$JAVA_BIN</span> <span style="color: #007800;">$ARG1</span> <span style="color: #007800;">$ARG2</span> <span style="color: #007800;">$ARG3</span>
<span style="color: #007800;">ExecStop</span>=<span style="color: #000000; font-weight: bold;">/</span>bin<span style="color: #000000; font-weight: bold;">/</span><span style="color: #c20cb9; font-weight: bold;">kill</span> <span style="color: #660033;">-TERM</span> <span style="color: #007800;">$MAINPID</span>
<span style="color: #007800;">TimeoutSec</span>=<span style="color: #000000;">300</span>
&nbsp;
<span style="color: #7a0874; font-weight: bold;">&#91;</span>Install<span style="color: #7a0874; font-weight: bold;">&#93;</span>
<span style="color: #007800;">WantedBy</span>=multi-user.target</pre></td></tr></table></div>

<p>Let&#8217;s start and stop the service</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Srv25 pronet<span style="color: #009900;">&#93;</span># systemctl start fixtures
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Srv25 pronet<span style="color: #009900;">&#93;</span># systemctl stop fixtures</pre></td></tr></table></div>

<p>if there is something wrong all service files and docker containers insert data into the systemd journal and we can read the journal :)</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Srv25 pronet<span style="color: #009900;">&#93;</span># journalctl <span style="color: #339933;">-</span>u fixtures<span style="color: #339933;">.</span>service</pre></td></tr></table></div>

<p>Checking the service status</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Srv25 pronet<span style="color: #009900;">&#93;</span># systemctl status fixtures
fixtures<span style="color: #339933;">.</span>service <span style="color: #339933;">-</span> Fixtures Service
   Loaded<span style="color: #339933;">:</span> loaded <span style="color: #009900;">&#40;</span><span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>lib<span style="color: #339933;">/</span>systemd<span style="color: #339933;">/</span>system<span style="color: #339933;">/</span>fixtures<span style="color: #339933;">.</span>service<span style="color: #339933;">;</span> disabled<span style="color: #009900;">&#41;</span>
   Active<span style="color: #339933;">:</span> active <span style="color: #009900;">&#40;</span>running<span style="color: #009900;">&#41;</span> since Wed <span style="color: #800080;">2014</span><span style="color: #339933;">-</span><span style="color: #800080;">10</span><span style="color: #339933;">-</span><span style="color: #800080;">29</span> <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">49</span> EET<span style="color: #339933;">;</span> 13min ago
 Main PID<span style="color: #339933;">:</span> <span style="color: #800080;">28859</span> <span style="color: #009900;">&#40;</span>java<span style="color: #009900;">&#41;</span>
   CGroup<span style="color: #339933;">:</span> <span style="color: #339933;">/</span>system<span style="color: #339933;">.</span>slice<span style="color: #339933;">/</span>fixtures<span style="color: #339933;">.</span>service
           └─<span style="color: #800080;">28859</span> <span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>java<span style="color: #339933;">/</span>jdk1<span style="color: #339933;">.</span>7<span style="color: #339933;">.</span>0_71<span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>java <span style="color: #339933;">-</span>Dfile<span style="color: #339933;">.</span>encoding<span style="color: #339933;">=</span>UTF<span style="color: #339933;">-</span><span style="color: #800080;">8</span> <span style="color: #339933;">-</span>Dproject<span style="color: #339933;">.</span>properties<span style="color: #339933;">=</span><span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>pronet<span style="color: #339933;">/</span>fixtures<span style="color: #339933;">/</span>fixtures<span style="color: #339933;">.</span>properties <span style="color: #339933;">-</span>Dlog4j<span style="color: #339933;">.</span>configuration<span style="color: #339933;">=</span>file<span style="color: #339933;">:...</span>
&nbsp;
Oct <span style="color: #800080;">29</span> <span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">21</span><span style="color: #339933;">:</span><span style="color: #800080;">49</span> Srv25 systemd<span style="color: #009900;">&#91;</span><span style="color: #800080;">1</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Started Fixtures Service<span style="color: #339933;">.</span></pre></td></tr></table></div>

<p>Enable the service to be started on bootup</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Srv25 pronet<span style="color: #009900;">&#93;</span># systemctl enable fixtures<span style="color: #339933;">.</span>service
ln <span style="color: #339933;">-</span>s <span style="color: #0000ff;">'/usr/lib/systemd/system/fixtures.service'</span> <span style="color: #0000ff;">'/etc/systemd/system/multi-user.target.wants/fixtures.service'</span>
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>Srv25 pronet<span style="color: #009900;">&#93;</span>#</pre></td></tr></table></div>

<p>So that&#8217;s how it works..</p>
<div class="bottomcontainerBox" style="background-color:transparent;">
			<div style="float:left; width:85px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fae.koroglu.org%2Falternative-way-to-daemonize-java-applications-on-systemd-centos7rhel7%2F&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font=verdana&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:85px; height:21px;"></iframe></div>
			<div style="float:left; width:80px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<g:plusone size="medium" href="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-systemd-centos7rhel7/"></g:plusone>
			</div>
			<div style="float:left; width:95px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<a href="http://twitter.com/share" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share', '');" class="twitter-share-button" data-url="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-systemd-centos7rhel7/"  data-text="Alternative Way to Daemonize Java Applications on Systemd (CentOS7/RHEL7)" data-count="horizontal"></a>
			</div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><script type="in/share" data-url="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-systemd-centos7rhel7/" data-counter="right"></script></div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><a href="http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-systemd-centos7rhel7/&media=" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-systemd-centos7rhel7/&amp;media=', '');" class="pin-it-button" count-layout="horizontal"></a></div>			
			</div><div style="clear:both"></div><div style="padding-bottom:4px;"></div>            </div>

			<p class="postmetadata">
				Posted in <b><a href="http://ae.koroglu.org/category/centos/" rel="category tag">CentOS</a>, <a href="http://ae.koroglu.org/category/linux/" rel="category tag">Linux</a></b>
                <b><a href="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-systemd-centos7rhel7/#respond">&raquo; No Comments</a></b>
			</p>
        </div> 
    			<div class="post" id="post-1203">
                        <div class="baslik">
						<h2><a href="http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/" rel="bookmark" title="How to install IBM Director Common Linux Agent 6.3.5 on CentOS6">How to install IBM Director Common Linux Agent 6.3.5 on CentOS6</a></h2>
				    		<small>29th October 2014 by Ali Erdinç Köroğlu</small>
                        </div>
			<div class="entry">
				<p>If you&#8217;ve IBM hardware you already know about <a href="http://www-03.ibm.com/systems/director/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www-03.ibm.com/systems/director/', 'IBM Director');" target="_blank">IBM Director</a>, if you dont please leave now :)<br />
As may know IBM only supports IBM Systems Director Common Agent 6.3.5 for RHEL5, RHEL6, SLES10 and SLES11 distributions. So what about CentOS6 users ??</p>
<p>Dont panic..</p>
<p>1. Discover your X86 server from Director Inventory<br />
2. Give root permission for SSH access to Director and finish request access stage<br />
3. Download the latest common agent from <a href="http://www-03.ibm.com/systems/director/downloads/agents.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www-03.ibm.com/systems/director/downloads/agents.html', 'IBM website');" target="_blank">IBM website</a> into the server where IBM Director is running!<br />
4. Import the latest agent from Director > Release Management > Agents<br />
5. Goto System x Management > View System x servers and operating systems<br />
6. Find you server&#8217;s IP address and right click it<br />
7. Choose Release Management > Install Agent<br />
8. Follow Agent Installation steps but you gonna select CommonAgent 6.3.5 xLinux and finish installation agent.</p>
<p>Dont worry you&#8217;ll get errors :)<br />
At this stage IBM Director is copied releated files into you server&#8217;s /tmp/commonagent_tmp directory, so let&#8217;s begin..</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs ~<span style="color: #009900;">&#93;</span># cd <span style="color: #339933;">/</span>tmp<span style="color: #339933;">/</span>commonagent_tmp<span style="color: #339933;">/</span>
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs commonagent_tmp<span style="color: #009900;">&#93;</span># mkdir rpm
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs commonagent_tmp<span style="color: #009900;">&#93;</span># <span style="color: #339933;">.</span><span style="color: #339933;">/</span>dir6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5_commonagent_linux_x86 <span style="color: #339933;">-</span>x rhel6 <span style="color: #339933;">-</span>p rpm<span style="color: #339933;">/</span>
<span style="color: #009900;">&#91;</span><span style="color: #800080;">1</span><span style="color: #339933;">-</span>Agree<span style="color: #339933;">|</span><span style="color: #800080;">0</span><span style="color: #339933;">-</span>Disagree<span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> <span style="color: #800080;">1</span>
Extracting RPM files to rpm<span style="color: #339933;">/</span>
<span style="color: #339933;">.............................</span>
<span style="color: #800080;">654801</span> blocks</pre></td></tr></table></div>

<p>Now we have rhel6 releated rpms..</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs commonagent_tmp<span style="color: #009900;">&#93;</span># cd rpm<span style="color: #339933;">/</span>
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs rpm<span style="color: #009900;">&#93;</span># ls
brocade_adapter_cimprovider<span style="color: #339933;">-</span>3<span style="color: #339933;">.</span>2<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>0<span style="color: #339933;">-</span>lsb<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm     ibmcim<span style="color: #339933;">-</span>baseserver<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm        ibmcim<span style="color: #339933;">-</span>snmp<span style="color: #339933;">-</span>5<span style="color: #339933;">.</span>2<span style="color: #339933;">.</span>1<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm
cassite<span style="color: #339933;">-</span>linux<span style="color: #339933;">-</span>x86<span style="color: #339933;">.</span>zip                                ibmcim<span style="color: #339933;">-</span>baseserver<span style="color: #339933;">-</span>mof<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span><span style="color: #800080;">1</span><span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm        ibmcim<span style="color: #339933;">-</span>snmpextensions<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm
diruninstall<span style="color: #339933;">.</span>agent                                   ibmcim<span style="color: #339933;">-</span>icu<span style="color: #339933;">-</span><span style="color: #800080;">36.0</span><span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm                ibmcim<span style="color: #339933;">-</span>ssl<span style="color: #339933;">-</span>1<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>1<span style="color: #339933;">.</span>7<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm
dsa<span style="color: #339933;">-</span><span style="color: #800080;">2.26</span><span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm                              ibmcim<span style="color: #339933;">-</span>instrumentation<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm   install
emulex_fc_provider_ibm<span style="color: #339933;">-</span>10<span style="color: #339933;">.</span>2<span style="color: #339933;">.</span>261<span style="color: #339933;">.</span>13<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i686<span style="color: #339933;">.</span>rpm    ibmcim<span style="color: #339933;">-</span>network<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm           ISDCommonAgent<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span><span style="color: #800080;">1</span><span style="color: #339933;">.</span>noarch<span style="color: #339933;">.</span>rpm
emulex_ucna_provider_ibm<span style="color: #339933;">-</span>10<span style="color: #339933;">.</span>2<span style="color: #339933;">.</span>261<span style="color: #339933;">.</span>13<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i686<span style="color: #339933;">.</span>rpm  ibmcim<span style="color: #339933;">-</span>network<span style="color: #339933;">-</span>mof<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span><span style="color: #800080;">1</span><span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm           Lib_Utils<span style="color: #339933;">-</span><span style="color: #800080;">1.00</span><span style="color: #339933;">-</span><span style="color: #800080;">09</span><span style="color: #339933;">.</span>noarch<span style="color: #339933;">.</span>rpm
ibmcim<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm                          ibmcim<span style="color: #339933;">-</span>objectmanager<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm     lsi_mr_hhr<span style="color: #339933;">-</span>00<span style="color: #339933;">.</span>50<span style="color: #339933;">.</span>0506<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm
ibmcim<span style="color: #339933;">-</span>agentextensions<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm          ibmcim<span style="color: #339933;">-</span>openslp<span style="color: #339933;">-</span>2<span style="color: #339933;">.</span>1<span style="color: #339933;">.</span>1636<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm        qlogic_cna_providers<span style="color: #339933;">-</span>1<span style="color: #339933;">.</span>5<span style="color: #339933;">.</span>6<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm
ibmcim<span style="color: #339933;">-</span>agentextensions<span style="color: #339933;">-</span>mof<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span><span style="color: #800080;">1</span><span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm          ibmcim<span style="color: #339933;">-</span>sblim<span style="color: #339933;">-</span>2<span style="color: #339933;">.</span>2<span style="color: #339933;">.</span>8<span style="color: #339933;">-</span>1rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm            setup<span style="color: #339933;">.</span>lin
ibmcim<span style="color: #339933;">-</span>baseos<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm                   ibmcim<span style="color: #339933;">-</span>serviceprocessor<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span>rhel6<span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm
ibmcim<span style="color: #339933;">-</span>baseos<span style="color: #339933;">-</span>mof<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span><span style="color: #800080;">1</span><span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm                   ibmcim<span style="color: #339933;">-</span>serviceprocessor<span style="color: #339933;">-</span>mof<span style="color: #339933;">-</span>6<span style="color: #339933;">.</span>3<span style="color: #339933;">.</span>5<span style="color: #339933;">-</span><span style="color: #800080;">1</span><span style="color: #339933;">.</span>i386<span style="color: #339933;">.</span>rpm
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs rpm<span style="color: #009900;">&#93;</span>#</pre></td></tr></table></div>

<p>Apply <a href="http://ae.koroglu.org/doc/install.patch" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ae.koroglu.org/doc/install.patch', 'my patch');">my patch</a> to install file..</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="diff" style="font-family:monospace;"><span style="color: #888822;">--- install.org	2014-10-28 23:24:55.208104735 +0200</span>
<span style="color: #888822;">+++ install	2014-10-28 23:46:12.973181647 +0200</span>
<span style="color: #440088;">@@ -70,8 +70,8 @@</span>
 RC_POWER_PAM_SLES_DEP_FAILED=<span style="">70</span>
&nbsp;
 # Distribution list and versions
<span style="color: #991111;">-DISTROS=&quot;redhat-release redhat-release-server redhat-release-workstation sled-release sles-release SUSE_SLES_SAP-release SLES-for-VMware-release release vmware-esx-vmware-release-4&quot;</span>
<span style="color: #991111;">-SUPPORTED_RELEASES=&quot;rhel5 rhel6 sles10 sles11&quot;</span>
<span style="color: #00b000;">+DISTROS=&quot;redhat-release redhat-release-server redhat-release-workstation centos-release sled-release sles-release SUSE_SLES_SAP-release SLES-for-VMware-release release vmware-esx-vmware-release-4&quot;</span>
<span style="color: #00b000;">+SUPPORTED_RELEASES=&quot;rhel5 rhel6 centos6 sles10 sles11&quot;</span>
&nbsp;
 # RPM attributes
 ARCH=i386
<span style="color: #440088;">@@ -336,6 +336,13 @@</span>
 	return <span style="">1</span>
 <span style="">&#125;</span>
&nbsp;
<span style="color: #00b000;">+check_centos6<span style="">&#40;</span><span style="">&#41;</span></span>
<span style="color: #00b000;">+<span style="">&#123;</span></span>
<span style="color: #00b000;">+        <span style="">&#91;</span> &quot;$<span style="">&#123;</span>1<span style="">&#125;</span>&quot; == &quot;centos-release-6&quot; <span style="">&#93;</span> &amp;&amp; \</span>
<span style="color: #00b000;">+                RELEASE=rhel6 &amp;&amp; BINARY_COMPAT_RELEASE=rhel6 &amp;&amp; return 0</span>
<span style="color: #00b000;">+        return 1</span>
<span style="color: #00b000;">+<span style="">&#125;</span></span>
<span style="color: #00b000;">+</span>
 check_sles10<span style="">&#40;</span><span style="">&#41;</span>
 <span style="">&#123;</span>
 	if <span style="">&#91;</span> &quot;$<span style="">&#123;</span><span style="">1</span><span style="">&#125;</span>&quot; == &quot;sles-release-<span style="">10</span>&quot; <span style="">&#93;</span> || \
<span style="color: #440088;">@@ -2453,6 +2460,8 @@</span>
 	<span style="">&#91;</span> $1 == &quot;redhat-release-server&quot; <span style="">&#93;</span> || \
 	<span style="">&#91;</span> $1 == &quot;redhat-release-workstation&quot; <span style="">&#93;</span> &amp;&amp; \
 	    RELEASE_RPM=$<span style="">&#40;</span>rpm --qf '%<span style="">&#123;</span>name<span style="">&#125;</span>-%<span style="">&#123;</span>version<span style="">&#125;</span>\n' -q --whatprovides /etc/redhat-release<span style="">&#41;</span>
<span style="color: #00b000;">+	<span style="">&#91;</span> $1 == &quot;centos-release&quot; <span style="">&#93;</span> &amp;&amp; \</span>
<span style="color: #00b000;">+            RELEASE_RPM=$<span style="">&#40;</span>rpm --qf '%<span style="">&#123;</span>name<span style="">&#125;</span>-%<span style="">&#123;</span>version<span style="">&#125;</span>\n' -q --whatprovides /etc/redhat-release<span style="">&#41;</span></span>
 	<span style="">&#91;</span> $1 == &quot;sles-release&quot; <span style="">&#93;</span> || \
 	<span style="">&#91;</span> $1 == &quot;SUSE_SLES_SAP-release&quot; <span style="">&#93;</span> || \
 	<span style="">&#91;</span> $1 == &quot;SLES-for-VMware-release&quot; <span style="">&#93;</span> || \</pre></td></tr></table></div>

<p>And then install the agent :)</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs rpm<span style="color: #009900;">&#93;</span># wget http<span style="color: #339933;">:</span><span style="color: #339933;">//</span>ae<span style="color: #339933;">.</span>koroglu<span style="color: #339933;">.</span>org<span style="color: #339933;">/</span>doc<span style="color: #339933;">/</span>install<span style="color: #339933;">.</span>patch
<span style="color: #339933;">--</span><span style="color: #800080;">2014</span><span style="color: #339933;">-</span><span style="color: #800080;">10</span><span style="color: #339933;">-</span><span style="color: #800080;">29</span> <span style="color: #800080;">02</span><span style="color: #339933;">:</span><span style="color: #800080;">08</span><span style="color: #339933;">:</span><span style="color: #800080;">42</span><span style="color: #339933;">--</span>  http<span style="color: #339933;">:</span><span style="color: #339933;">//</span>ae<span style="color: #339933;">.</span>koroglu<span style="color: #339933;">.</span>org<span style="color: #339933;">/</span>doc<span style="color: #339933;">/</span>install<span style="color: #339933;">.</span>patch
Resolving ae<span style="color: #339933;">.</span>koroglu<span style="color: #339933;">.</span>org<span style="color: #339933;">...</span> 78<span style="color: #339933;">.</span>46<span style="color: #339933;">.</span>226<span style="color: #339933;">.</span>107
Connecting to ae<span style="color: #339933;">.</span>koroglu<span style="color: #339933;">.</span>org<span style="color: #339933;">|</span>78<span style="color: #339933;">.</span>46<span style="color: #339933;">.</span>226<span style="color: #339933;">.</span>107<span style="color: #339933;">|</span><span style="color: #339933;">:</span><span style="color: #800080;">80</span><span style="color: #339933;">...</span> connected<span style="color: #339933;">.</span>
HTTP request sent<span style="color: #339933;">,</span> awaiting response<span style="color: #339933;">...</span> <span style="color: #800080;">200</span> OK
Length<span style="color: #339933;">:</span> <span style="color: #800080;">1413</span> <span style="color: #009900;">&#40;</span>1<span style="color: #339933;">.</span>4K<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#91;</span>application<span style="color: #339933;">/</span>octet<span style="color: #339933;">-</span>stream<span style="color: #009900;">&#93;</span>
Saving to<span style="color: #339933;">:</span> “install<span style="color: #339933;">.</span>patch”
&nbsp;
<span style="color: #800080;">100</span><span style="color: #666666; font-style: italic;">%[==============================================================================&gt;] 1,413       --.-K/s   in 0s      </span>
&nbsp;
<span style="color: #800080;">2014</span><span style="color: #339933;">-</span><span style="color: #800080;">10</span><span style="color: #339933;">-</span><span style="color: #800080;">29</span> <span style="color: #800080;">02</span><span style="color: #339933;">:</span><span style="color: #800080;">08</span><span style="color: #339933;">:</span><span style="color: #800080;">47</span> <span style="color: #009900;">&#40;</span><span style="color: #800080;">265</span> MB<span style="color: #339933;">/</span>s<span style="color: #009900;">&#41;</span> <span style="color: #339933;">-</span> “install<span style="color: #339933;">.</span>patch” saved <span style="color: #009900;">&#91;</span><span style="color: #800080;">1413</span><span style="color: #339933;">/</span><span style="color: #800080;">1413</span><span style="color: #009900;">&#93;</span>
&nbsp;
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs rpm<span style="color: #009900;">&#93;</span># patch <span style="color: #339933;">-</span>p0 <span style="color: #339933;">&lt;</span> install<span style="color: #339933;">.</span>patch 
patching file install
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>dbs rpm<span style="color: #009900;">&#93;</span># <span style="color: #339933;">.</span><span style="color: #339933;">/</span>install <span style="color: #339933;">-</span>ivs <span style="color: #339933;">-</span>p <span style="color: #339933;">/</span>tmp<span style="color: #339933;">/</span>commonagent_tmp<span style="color: #339933;">/</span>rpm</pre></td></tr></table></div>

<p>PS: You may need to install <b>pam.i686</b> before installation.</p>
<div class="bottomcontainerBox" style="background-color:transparent;">
			<div style="float:left; width:85px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fae.koroglu.org%2Fhow-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6%2F&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font=verdana&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:85px; height:21px;"></iframe></div>
			<div style="float:left; width:80px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<g:plusone size="medium" href="http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/"></g:plusone>
			</div>
			<div style="float:left; width:95px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<a href="http://twitter.com/share" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share', '');" class="twitter-share-button" data-url="http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/"  data-text="How to install IBM Director Common Linux Agent 6.3.5 on CentOS6" data-count="horizontal"></a>
			</div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><script type="in/share" data-url="http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/" data-counter="right"></script></div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><a href="http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/&media=" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/&amp;media=', '');" class="pin-it-button" count-layout="horizontal"></a></div>			
			</div><div style="clear:both"></div><div style="padding-bottom:4px;"></div>            </div>

			<p class="postmetadata">
				Posted in <b><a href="http://ae.koroglu.org/category/centos/" rel="category tag">CentOS</a>, <a href="http://ae.koroglu.org/category/ibm/" rel="category tag">IBM</a></b>
                <b><a href="http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/#comments">&raquo; 2 Comments</a></b>
			</p>
        </div> 
    			<div class="post" id="post-1089">
                        <div class="baslik">
						<h2><a href="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/" rel="bookmark" title="Alternative Way to Daemonize Java Applications on Red Hat / CentOS Linux">Alternative Way to Daemonize Java Applications on Red Hat / CentOS Linux</a></h2>
				    		<small>24th July 2014 by Ali Erdinç Köroğlu</small>
                        </div>
			<div class="entry">
				<p>We&#8217;re using <a href="http://www.hsqldb.org" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.hsqldb.org', 'Hsqldb');" target="_blank">Hsqldb</a> and <a href="http://glassfish.java.net" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://glassfish.java.net', 'Glassfish');" target="_blank">Glassfish</a> on a project, our developers found some scripts to run java applications as daemon and it was ok for a while but when they started to report problems about the services I checked what they&#8217;re using. A lot of function&#8217;s, write&#8217;s, check&#8217;s, for&#8217;s, while&#8217;s, if&#8217;s, else&#8217;s etc.. There should be an easy way to do this? Guess what I decided to make it simple, Yet another NIH Syndrome ? :) Let me try to explain.. Bytheway we dont want to compile source code or add any 3rd party repositories.</p>
<p>But 1st what is a daemon? Daemon stands for <b>D</b>isk <b>a</b>nd <b>E</b>xecution <b>Mon</b>itor and is a long-running background process that answers requests for services. As explained in <a href="http://en.wikipedia.org/wiki/Daemon_%28computing%29" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Daemon_%28computing%29', 'Wikipedia');">Wikipedia</a>:</p>
<blockquote><p>On a Unix-like system, the common method for a process to become a daemon, when the process is started from the command line or from a startup script such as an init script or a SystemStarter script, involves:</p>
<ol>
<li>Dissociating from the controlling tty</li>
<li>Becoming a session leader</li>
<li>Becoming a process group leader</li>
<li>Executing as a background task by forking and exiting (once or twice). This is required sometimes for the process to become a session leader. It also allows the parent process to continue its normal execution.</li>
<li>Setting the root directory (/) as the current working directory so that the process does not keep any directory in use that may be on a mounted file system (allowing it to be unmounted).</li>
<li>Changing the umask to 0 to allow open(), creat(), et al. operating system calls to provide their own permission masks and not to depend on the umask of the caller</li>
<li>Closing all inherited files at the time of execution that are left open by the parent process, including file descriptors 0, 1 and 2 for the standard streams (stdin, stdout and stderr). Required files will be opened later.</li>
<li>Using a logfile, the console, or /dev/null as stdin, stdout, and stderr</li>
</ol>
</blockquote>
<p>There are some methods to run application as daemon on Linux such as; <a href="http://anonscm.debian.org/gitweb/?p=dpkg/dpkg.git" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://anonscm.debian.org/gitweb/?p=dpkg/dpkg.git', 'start-stop-daemon (part of dpkg package)');" target="_blank">start-stop-daemon (part of dpkg package)</a>, <a href="http://fedoraproject.org/wiki/Packaging:SysVInitScript#Functions_in_.2Fetc.2Finit.d.2Ffunctions" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://fedoraproject.org/wiki/Packaging:SysVInitScript#Functions_in_.2Fetc.2Finit.d.2Ffunctions', 'Red Hat init.d function');" target="_blank">Red Hat init.d function</a>, <a href="http://en.wikipedia.org/wiki/Nohup" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Nohup', 'Nohup');" target="_blank">Nohup</a></p>
<p><b>Start-stop-daemon</b>: It&#8217;s a good tool but <a href="https://apps.fedoraproject.org/packages/dpkg/" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://apps.fedoraproject.org/packages/dpkg/', 'EPEL dpkg package');" target="_blank">EPEL dpkg package</a> does not consist it, I don&#8217;t know why ?<br />
<b>Red Hat init.d function</b>: Setting application/working directory could be problem also not possible to get StdOut &#038; StdErr outputs as log file<br />
<b>Nohup</b>: No automation, you have to write lots of things.. nohup $command >>$log_file 2>&#038;1 &#038; echo \$! >$pid_file</p>
<p>No start-stop-daemon in EPEL repository, RHEL init.d daemon function is not enough, Nohup requires bash scripting knowledge.. Ok what now ??<br />
Instead use <a href="http://software.clapper.org/daemonize" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://software.clapper.org/daemonize', 'Daemonize');" target="_blank">Daemonize</a>. Daemonize runs a command as a Unix daemon, it&#8217;s a good alternative for start-stop-daemon and daemonize package is in the <a href="https://fedoraproject.org/wiki/EPEL" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://fedoraproject.org/wiki/EPEL', 'EPEL repository');" target="_blank">EPEL repository</a>. </p>
<p>I wrote an init.d script (Jdis) to run java applications as daemon with daemonize on RHEL and CentOS Linux, <b>you can download Jdis from GitHub: <a href="https://github.com/aekoroglu/sys-tools/blob/master/Jdis/java_daemon-init.sh" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://github.com/aekoroglu/sys-tools/blob/master/Jdis/java_daemon-init.sh', 'java_daemon-init.sh');" target="_blank">java_daemon-init.sh</a></b></p>
<h2>Hsqldb Init script example</h2>
<p>An example from real world situation; Hsqldb. HyperSQL DataBase (Hsqldb) is a relational database software written in Java. It offers a small, fast multithreaded and transactional database engine with in-memory and disk-based tables and supports embedded and server mode.</p>
<p>Let&#8217;s daemonize it..</p>
<p>We dont want to run the application with root user</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>zion ~<span style="color: #009900;">&#93;</span># useradd hsqldb <span style="color: #339933;">-</span>s <span style="color: #339933;">/</span>sbin<span style="color: #339933;">/</span>nologin</pre></td></tr></table></div>

<p>Change owner of the application directory</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>zion ~<span style="color: #009900;">&#93;</span># chown <span style="color: #339933;">-</span>R hsqldb<span style="color: #339933;">:</span>hsqldb <span style="color: #339933;">/</span>opt<span style="color: #339933;">/</span>hsqldb</pre></td></tr></table></div>


<div class="wp_syntax"><table><caption>/etc/init.d/hsqldb</caption><tr><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
</pre></td><td class="code"><pre class="bash" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#!/bin/bash</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># Jdis - Java daemon init-script for Red Hat / CentOS Linux</span>
<span style="color: #666666; font-style: italic;"># Ali Erdinc Koroglu - http://ae.koroglu.org</span>
<span style="color: #666666; font-style: italic;"># License : GNU GPL (http://www.gnu.org/licenses/gpl.html)</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># You must install daemonize package from EPEL repository to use this script.</span>
<span style="color: #666666; font-style: italic;"># How to add EPEL repository: http://ae.koroglu.org/docs/adding-epel-repository-on-centos/</span>
<span style="color: #666666; font-style: italic;">#</span>
<span style="color: #666666; font-style: italic;"># History:</span>
<span style="color: #666666; font-style: italic;"># 2014-08-19 : First release</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># chkconfig: 345 85 15</span>
<span style="color: #666666; font-style: italic;"># description: Java daemon script</span>
&nbsp;
<span style="color: #666666; font-style: italic;">### BEGIN INIT INFO</span>
<span style="color: #666666; font-style: italic;"># Provides:</span>
<span style="color: #666666; font-style: italic;"># Required-Start: $local_fs $network $syslog $time</span>
<span style="color: #666666; font-style: italic;"># Required-Stop: $local_fs $network $syslog $time</span>
<span style="color: #666666; font-style: italic;"># Short-Description: start and stop Java daemons</span>
<span style="color: #666666; font-style: italic;"># Description: Java daemon init script</span>
<span style="color: #666666; font-style: italic;">### END INIT INFO</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># source function library</span>
. <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>init.d<span style="color: #000000; font-weight: bold;">/</span>functions
&nbsp;
<span style="color: #666666; font-style: italic;"># Java Home</span>
<span style="color: #007800;">java_home</span>=<span style="color: #ff0000;">&quot;/usr/java/jdk1.7.0_45&quot;</span>                                               <span style="color: #666666; font-style: italic;"># java path</span>
&nbsp;
<span style="color: #666666; font-style: italic;"># Service settings</span>
<span style="color: #007800;">service_name</span>=<span style="color: #ff0000;">&quot;hsqldb&quot;</span>                                                           <span style="color: #666666; font-style: italic;"># Service name</span>
<span style="color: #007800;">service_user</span>=<span style="color: #ff0000;">&quot;hsqldb&quot;</span>                                                           <span style="color: #666666; font-style: italic;"># User/group of process</span>
<span style="color: #007800;">pid_file</span>=<span style="color: #ff0000;">&quot;/var/run/<span style="color: #007800;">$service_name</span>.pid&quot;</span>                                           <span style="color: #666666; font-style: italic;"># Pid file</span>
<span style="color: #007800;">log_file</span>=<span style="color: #ff0000;">&quot;/var/log/<span style="color: #007800;">$service_name</span>/<span style="color: #007800;">$service_name</span>.log&quot;</span>                             <span style="color: #666666; font-style: italic;"># StdOut log file</span>
<span style="color: #007800;">errlog_file</span>=<span style="color: #ff0000;">&quot;/var/log/<span style="color: #007800;">$service_name</span>/<span style="color: #007800;">$service_name</span>-error.log&quot;</span>                    <span style="color: #666666; font-style: italic;"># StdErr log file</span>
<span style="color: #007800;">java</span>=<span style="color: #ff0000;">&quot;<span style="color: #007800;">$java_home</span>/bin/java&quot;</span>                                                      <span style="color: #666666; font-style: italic;"># Java binary</span>
<span style="color: #007800;">java_appdir</span>=<span style="color: #ff0000;">&quot;/opt/hsqldb/data&quot;</span>                                                  <span style="color: #666666; font-style: italic;"># Application path</span>
<span style="color: #007800;">java_applibdir</span>=<span style="color: #ff0000;">&quot;/opt/hsqldb/lib&quot;</span>                                                <span style="color: #666666; font-style: italic;"># Application Lib path</span>
<span style="color: #007800;">java_arg1</span>=<span style="color: #ff0000;">&quot;-server -Xms1G -Xmx6G -XX:NewSize=256m&quot;</span>                              <span style="color: #666666; font-style: italic;"># Argument 1</span>
<span style="color: #007800;">java_arg2</span>=<span style="color: #ff0000;">&quot;-XX:MaxNewSize=256m -XX:PermSize=512m -XX:MaxPermSize=512m&quot;</span>          <span style="color: #666666; font-style: italic;"># Argument 2</span>
<span style="color: #007800;">java_arg3</span>=<span style="color: #ff0000;">&quot;-Dproject.properties=<span style="color: #007800;">$java_appdir</span>/test.properties&quot;</span>                   <span style="color: #666666; font-style: italic;"># Argument 3</span>
<span style="color: #007800;">java_arg4</span>=<span style="color: #ff0000;">&quot;-classpath <span style="color: #007800;">$java_applibdir</span>/hsqldb.jar org.hsqldb.server.Server&quot;</span>      <span style="color: #666666; font-style: italic;"># Argument 4</span>
<span style="color: #007800;">java_args</span>=<span style="color: #ff0000;">&quot;<span style="color: #007800;">$java_arg1</span> <span style="color: #007800;">$java_arg2</span> <span style="color: #007800;">$java_arg3</span> <span style="color: #007800;">$java_arg4</span>&quot;</span>                         <span style="color: #666666; font-style: italic;"># Java Arguments</span>
&nbsp;
<span style="color: #007800;">RETVAL</span>=<span style="color: #000000;">0</span>
start<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #660033;">-x</span> <span style="color: #007800;">$java</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #000000; font-weight: bold;">||</span> <span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #000000;">5</span>
    <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-n</span> $<span style="color: #ff0000;">&quot;Starting <span style="color: #007800;">$service_name</span>: &quot;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$EUID</span> <span style="color: #660033;">-ne</span> <span style="color: #000000;">0</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #007800;">RETVAL</span>=<span style="color: #000000;">1</span>
        failure
    <span style="color: #000000; font-weight: bold;">elif</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #660033;">-s</span> <span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>run<span style="color: #000000; font-weight: bold;">/</span><span style="color: #007800;">$service_name</span>.pid <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #007800;">RETVAL</span>=<span style="color: #000000;">1</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-n</span> $<span style="color: #ff0000;">&quot;already running..&quot;</span>
        failure
    <span style="color: #000000; font-weight: bold;">else</span>
        daemonize <span style="color: #660033;">-u</span> <span style="color: #007800;">$service_user</span> <span style="color: #660033;">-p</span> <span style="color: #007800;">$pid_file</span> <span style="color: #660033;">-o</span> <span style="color: #007800;">$log_file</span> <span style="color: #660033;">-e</span> <span style="color: #007800;">$errlog_file</span> <span style="color: #660033;">-c</span> <span style="color: #007800;">$java_appdir</span> <span style="color: #007800;">$java</span> <span style="color: #007800;">$java_args</span> <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> success <span style="color: #000000; font-weight: bold;">||</span> failure
        <span style="color: #007800;">RETVAL</span>=<span style="color: #007800;">$?</span>
        <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$RETVAL</span> <span style="color: #660033;">-eq</span> <span style="color: #000000;">0</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> <span style="color: #c20cb9; font-weight: bold;">touch</span> <span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>lock<span style="color: #000000; font-weight: bold;">/</span>subsys<span style="color: #000000; font-weight: bold;">/</span><span style="color: #007800;">$service_name</span>
    <span style="color: #000000; font-weight: bold;">fi</span>;
    <span style="color: #7a0874; font-weight: bold;">echo</span>
    <span style="color: #7a0874; font-weight: bold;">return</span> <span style="color: #007800;">$RETVAL</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
stop<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#123;</span>
    <span style="color: #7a0874; font-weight: bold;">echo</span> <span style="color: #660033;">-n</span> $<span style="color: #ff0000;">&quot;Stopping <span style="color: #007800;">$service_name</span>: &quot;</span>
    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$EUID</span> <span style="color: #660033;">-ne</span> <span style="color: #000000;">0</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span>; <span style="color: #000000; font-weight: bold;">then</span>
        <span style="color: #007800;">RETVAL</span>=<span style="color: #000000;">1</span>
        failure
    <span style="color: #000000; font-weight: bold;">else</span>
        killproc <span style="color: #660033;">-p</span> <span style="color: #007800;">$pid_file</span>
        <span style="color: #007800;">RETVAL</span>=<span style="color: #007800;">$?</span>
        <span style="color: #7a0874; font-weight: bold;">&#91;</span> <span style="color: #007800;">$RETVAL</span> <span style="color: #660033;">-eq</span> <span style="color: #000000;">0</span> <span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #000000; font-weight: bold;">&amp;&amp;</span> <span style="color: #c20cb9; font-weight: bold;">rm</span> <span style="color: #660033;">-f</span> <span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>lock<span style="color: #000000; font-weight: bold;">/</span>subsys<span style="color: #000000; font-weight: bold;">/</span><span style="color: #007800;">$service_name</span>
    <span style="color: #000000; font-weight: bold;">fi</span>;
    <span style="color: #7a0874; font-weight: bold;">echo</span>
    <span style="color: #7a0874; font-weight: bold;">return</span> <span style="color: #007800;">$RETVAL</span>
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
restart<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#123;</span>
    stop
    start
<span style="color: #7a0874; font-weight: bold;">&#125;</span>
&nbsp;
<span style="color: #000000; font-weight: bold;">case</span> <span style="color: #ff0000;">&quot;$1&quot;</span> <span style="color: #000000; font-weight: bold;">in</span>
    start<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        start
        <span style="color: #007800;">RETVAL</span>=<span style="color: #007800;">$?</span>
        <span style="color: #000000; font-weight: bold;">;;</span>
    stop<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        stop
        <span style="color: #007800;">RETVAL</span>=<span style="color: #007800;">$?</span>
        <span style="color: #000000; font-weight: bold;">;;</span>
    restart<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        restart
        <span style="color: #007800;">RETVAL</span>=<span style="color: #007800;">$?</span>
        <span style="color: #000000; font-weight: bold;">;;</span>
    status<span style="color: #7a0874; font-weight: bold;">&#41;</span>
        status <span style="color: #007800;">$service_name</span>
        <span style="color: #007800;">RETVAL</span>=<span style="color: #007800;">$?</span>
        <span style="color: #000000; font-weight: bold;">;;</span>
    <span style="color: #000000; font-weight: bold;">*</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
        <span style="color: #7a0874; font-weight: bold;">echo</span> $<span style="color: #ff0000;">&quot;Usage: $0 {start|stop|status|restart}&quot;</span>
        <span style="color: #007800;">RETVAL</span>=<span style="color: #000000;">2</span>
<span style="color: #000000; font-weight: bold;">esac</span>
<span style="color: #7a0874; font-weight: bold;">exit</span> <span style="color: #007800;">$RETVAL</span></pre></td></tr></table></div>

<p>lets check..</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>zion ~<span style="color: #009900;">&#93;</span># <span style="color: #339933;">/</span>etc<span style="color: #339933;">/</span>init<span style="color: #339933;">.</span>d<span style="color: #339933;">/</span>hsqldb start
Starting hsqldb<span style="color: #339933;">:</span>                                           <span style="color: #009900;">&#91;</span>  OK  <span style="color: #009900;">&#93;</span>
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>zion ~<span style="color: #009900;">&#93;</span># ps aux <span style="color: #339933;">|</span> grep hsqldb
hsqldb     <span style="color: #800080;">463</span>  <span style="color: #800080;">178</span>  <span style="color: #800080;">1.0</span> <span style="color: #800080;">8555172</span> <span style="color: #800080;">349364</span> ?      Ssl  <span style="color: #800080;">15</span><span style="color: #339933;">:</span><span style="color: #800080;">04</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">10</span> <span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>java<span style="color: #339933;">/</span>jdk1<span style="color: #339933;">.</span>7<span style="color: #339933;">.</span>0_45<span style="color: #339933;">/</span>bin<span style="color: #339933;">/</span>java <span style="color: #339933;">-</span>server <span style="color: #339933;">-</span>Xms1G <span style="color: #339933;">-</span>Xmx6G <span style="color: #339933;">-</span>XX<span style="color: #339933;">:</span>NewSize<span style="color: #339933;">=</span>256m <span style="color: #339933;">-</span>XX<span style="color: #339933;">:</span>MaxNewSize<span style="color: #339933;">=</span>256m <span style="color: #339933;">-</span>XX<span style="color: #339933;">:</span>PermSize<span style="color: #339933;">=</span>512m <span style="color: #339933;">-</span>XX<span style="color: #339933;">:</span>MaxPermSize<span style="color: #339933;">=</span>512m <span style="color: #339933;">-</span>Dproject<span style="color: #339933;">.</span>properties<span style="color: #339933;">=</span><span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>share<span style="color: #339933;">/</span>pronet<span style="color: #339933;">/</span>hsqldb<span style="color: #339933;">/</span>data<span style="color: #339933;">/</span>test<span style="color: #339933;">.</span>properties <span style="color: #339933;">-</span>classpath <span style="color: #339933;">/</span>usr<span style="color: #339933;">/</span>share<span style="color: #339933;">/</span>pronet<span style="color: #339933;">/</span>hsqldb<span style="color: #339933;">/</span>lib<span style="color: #339933;">/</span>hsqldb<span style="color: #339933;">.</span>jar org<span style="color: #339933;">.</span>hsqldb<span style="color: #339933;">.</span>server<span style="color: #339933;">.</span>Server
root       <span style="color: #800080;">485</span>  <span style="color: #800080;">0.0</span>  <span style="color: #800080;">0.0</span> <span style="color: #800080;">103244</span>   <span style="color: #800080;">848</span> pts<span style="color: #339933;">/</span><span style="color: #800080;">0</span>    R<span style="color: #339933;">+</span>   <span style="color: #800080;">15</span><span style="color: #339933;">:</span><span style="color: #800080;">04</span>   <span style="color: #800080;">0</span><span style="color: #339933;">:</span><span style="color: #800080;">00</span> grep hsqldb
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>zion ~<span style="color: #009900;">&#93;</span># <span style="color: #339933;">/</span>etc<span style="color: #339933;">/</span>init<span style="color: #339933;">.</span>d<span style="color: #339933;">/</span>hsqldb status
hsqldb <span style="color: #009900;">&#40;</span>pid  <span style="color: #800080;">463</span><span style="color: #009900;">&#41;</span> <span style="color: #990000;">is</span> running<span style="color: #339933;">...</span>
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>zion ~<span style="color: #009900;">&#93;</span># <span style="color: #339933;">/</span>etc<span style="color: #339933;">/</span>init<span style="color: #339933;">.</span>d<span style="color: #339933;">/</span>hsqldb stop
Stopping hsqldb<span style="color: #339933;">:</span>                                           <span style="color: #009900;">&#91;</span>  OK  <span style="color: #009900;">&#93;</span></pre></td></tr></table></div>

<div class="bottomcontainerBox" style="background-color:transparent;">
			<div style="float:left; width:85px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fae.koroglu.org%2Falternative-way-to-daemonize-java-applications-on-red-hat-centos-linux%2F&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font=verdana&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:85px; height:21px;"></iframe></div>
			<div style="float:left; width:80px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<g:plusone size="medium" href="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/"></g:plusone>
			</div>
			<div style="float:left; width:95px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<a href="http://twitter.com/share" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share', '');" class="twitter-share-button" data-url="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/"  data-text="Alternative Way to Daemonize Java Applications on Red Hat / CentOS Linux" data-count="horizontal"></a>
			</div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><script type="in/share" data-url="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/" data-counter="right"></script></div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><a href="http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/&media=" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/&amp;media=', '');" class="pin-it-button" count-layout="horizontal"></a></div>			
			</div><div style="clear:both"></div><div style="padding-bottom:4px;"></div>            </div>

			<p class="postmetadata">
				Posted in <b><a href="http://ae.koroglu.org/category/centos/" rel="category tag">CentOS</a>, <a href="http://ae.koroglu.org/category/code/" rel="category tag">Coding</a>, <a href="http://ae.koroglu.org/category/linux/" rel="category tag">Linux</a></b>
                <b><a href="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/#comments">&raquo; 1 Comment</a></b>
			</p>
        </div> 
    			<div class="post" id="post-1038">
                        <div class="baslik">
						<h2><a href="http://ae.koroglu.org/how-to-sync-time-properly-ntpdate-or-ntpd/" rel="bookmark" title="How to sync time properly: ntpdate or ntpd?">How to sync time properly: ntpdate or ntpd?</a></h2>
				    		<small>7th November 2013 by Ali Erdinç Köroğlu</small>
                        </div>
			<div class="entry">
				<p>Previously I explained how to install <a href="http://ae.koroglu.org/chrooted-ntp-server-on-centos-6/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ae.koroglu.org/chrooted-ntp-server-on-centos-6/', 'chrooted NTP server');" target="_blank">chrooted NTP server</a>, but the question is how you&#8217;re going to sync time of your server with a NTP server. There are two options: Ntpdate and Ntpd.</p>
<p><b>Ntpdate</b> is for the one-time synchronization only.<br />
<b>Ntpd</b> (network time protocol daemon) is for automatically sync system time with a remote reference time server.</p>
<p>There are many examples like adding cronjobs for ntpdate hourly, daily, weekly etc. The main difference between ntpd and ntpdate; ntpd will run all the time and continuously adjust the system time when clocks drift but ntpdate will not. Also keep in mind that <a href="http://support.ntp.org/bin/view/Dev/DeprecatingNtpdate" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://support.ntp.org/bin/view/Dev/DeprecatingNtpdate', 'ntpdate is deprecated');" target="_blank">ntpdate is deprecated</a> as of September 2012.</p>
<p>So why we need ntpdate at all ?<br />
In ancient ages it was important to get the system time before starting ntpd and usually done by ntpdate. Over time, ntpd evolved and no longer necessary to set the time before starting ntpd. </p>
<p>To sum up; if you&#8217;re running time specific operations like application servers, database servers, email servers, clusters etc. ntpd is what you need.</p>
<h2>Installation</h2>
<p>Since NTP package is in the base repository no need to add extra repository.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;">yum install ntp
chkconfig ntpd on</pre></td></tr></table></div>

<h2>Configuration</h2>

<div class="wp_syntax"><table><caption>/etc/ntp.conf</caption><tr><td class="code"><pre class="ini" style="font-family:monospace;">driftfile /var/lib/ntp/drift
restrict default kod nomodify notrap nopeer noquery
restrict -<span style="">6</span> default kod nomodify notrap nopeer noquery
restrict 127.0.0.1
restrict -<span style="">6</span> ::<span style="">1</span>
&nbsp;
server 192.168.100.254          # your NTP server
server <span style="">0</span>.tr.pool.ntp.org        # region releated ntp.org server
server ntp.ulakbim.gov.tr       # local authority</pre></td></tr></table></div>

<p>Since this will not be a ntp server for other so no need to listen on all interfaces.</p>

<div class="wp_syntax"><table><caption>/etc/sysconfig/ntpd</caption><tr><td class="code"><pre class="ini" style="font-family:monospace;"><span style="color: #000099;">OPTIONS</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #933;">&quot;-u ntp:ntp -p /var/run/ntpd.pid -g -I eth0&quot;</span></pre></td></tr></table></div>

<p>Starting..</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>cache ~<span style="color: #009900;">&#93;</span># <span style="color: #339933;">/</span>etc<span style="color: #339933;">/</span>init<span style="color: #339933;">.</span>d<span style="color: #339933;">/</span>ntpd start
Starting ntpd<span style="color: #339933;">:</span>                                             <span style="color: #009900;">&#91;</span>  OK  <span style="color: #009900;">&#93;</span></pre></td></tr></table></div>

<p>NTP query result and network time synchronisation status</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="prolog" style="font-family:monospace;"><span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>cache ~<span style="color: #009900;">&#93;</span># ntpstat 
synchronised to NTP server <span style="color: #009900;">&#40;</span>192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>100<span style="color: #339933;">.</span>254<span style="color: #009900;">&#41;</span> at stratum <span style="color: #800080;">4</span> 
   time correct to within <span style="color: #800080;">108</span> ms
   polling server every <span style="color: #800080;">64</span> s
<span style="color: #009900;">&#91;</span>root<span style="color: #339933;">@</span>cache ~<span style="color: #009900;">&#93;</span># ntpq <span style="color: #339933;">-</span>p
     remote           refid      st t when poll reach   delay   offset  jitter
<span style="color: #339933;">==============================================================================</span>
<span style="color: #339933;">*</span>192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>100<span style="color: #339933;">.</span>254 82<span style="color: #339933;">.</span>94<span style="color: #339933;">.</span>167<span style="color: #339933;">.</span>75     <span style="color: #800080;">3</span> u    <span style="color: #800080;">5</span>   <span style="color: #800080;">64</span>  <span style="color: #800080;">377</span>    <span style="color: #800080;">0.276</span>  <span style="color: #339933;">-</span><span style="color: #800080;">21.198</span>  <span style="color: #800080;">25.027</span></pre></td></tr></table></div>

<p>And as you see everything ok..</p>

<div class="wp_syntax"><table><caption>/var/log/messages</caption><tr><td class="code"><pre class="prolog" style="font-family:monospace;">Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44248</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> ntpd 4<span style="color: #339933;">.</span>2<span style="color: #339933;">.</span>4p8<span style="color: #339933;">@</span><span style="color: #800080;">1.1612</span><span style="color: #339933;">-</span>o Fri Feb <span style="color: #800080;">22</span> <span style="color: #800080;">11</span><span style="color: #339933;">:</span><span style="color: #800080;">23</span><span style="color: #339933;">:</span><span style="color: #800080;">27</span> UTC <span style="color: #800080;">2013</span> <span style="color: #009900;">&#40;</span><span style="color: #800080;">1</span><span style="color: #009900;">&#41;</span>
Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> precision <span style="color: #339933;">=</span> <span style="color: #800080;">0.079</span> usec
Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on interface #<span style="color: #800080;">0</span> wildcard<span style="color: #339933;">,</span> 0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0#<span style="color: #800080;">123</span> Disabled
Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on interface #<span style="color: #800080;">1</span> wildcard<span style="color: #339933;">,</span> <span style="color: #339933;">::</span>#<span style="color: #800080;">123</span> Disabled
<span style="display:block;background-color: #ffc;">Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on interface #<span style="color: #800080;">2</span> lo<span style="color: #339933;">,</span> <span style="color: #339933;">::</span><span style="color: #800080;">1</span>#<span style="color: #800080;">123</span> Enabled</span><span style="display:block;background-color: #ffc;">Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on interface #<span style="color: #800080;">3</span> eth0<span style="color: #339933;">,</span> fe80<span style="color: #339933;">::</span>20c<span style="color: #339933;">:</span>29ff<span style="color: #339933;">:</span>febd<span style="color: #339933;">:</span>d65f#<span style="color: #800080;">123</span> Enabled</span>Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on interface #<span style="color: #800080;">4</span> eth1<span style="color: #339933;">,</span> fe80<span style="color: #339933;">::</span>20c<span style="color: #339933;">:</span>29ff<span style="color: #339933;">:</span>febd<span style="color: #339933;">:</span>d669#<span style="color: #800080;">123</span> Disabled
<span style="display:block;background-color: #ffc;">Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on interface #<span style="color: #800080;">5</span> lo<span style="color: #339933;">,</span> 127<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>0<span style="color: #339933;">.</span>1#<span style="color: #800080;">123</span> Enabled</span><span style="display:block;background-color: #ffc;">Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on interface #<span style="color: #800080;">6</span> eth0<span style="color: #339933;">,</span> 192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>100<span style="color: #339933;">.</span>1#<span style="color: #800080;">123</span> Enabled</span>Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on interface #<span style="color: #800080;">7</span> eth1<span style="color: #339933;">,</span> 192<span style="color: #339933;">.</span>168<span style="color: #339933;">.</span>101<span style="color: #339933;">.</span>1#<span style="color: #800080;">123</span> Disabled
Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> Listening on routing socket on fd #<span style="color: #800080;">29</span> for interface updates
Nov  <span style="color: #800080;">7</span> <span style="color: #800080;">13</span><span style="color: #339933;">:</span><span style="color: #800080;">48</span><span style="color: #339933;">:</span><span style="color: #800080;">51</span> cache ntpd<span style="color: #009900;">&#91;</span><span style="color: #800080;">44249</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">:</span> kernel time sync status <span style="color: #800080;">2040</span></pre></td></tr></table></div>

<div class="bottomcontainerBox" style="background-color:transparent;">
			<div style="float:left; width:85px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fae.koroglu.org%2Fhow-to-sync-time-properly-ntpdate-or-ntpd%2F&amp;layout=button_count&amp;show_faces=false&amp;width=85&amp;action=like&amp;font=verdana&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:85px; height:21px;"></iframe></div>
			<div style="float:left; width:80px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<g:plusone size="medium" href="http://ae.koroglu.org/how-to-sync-time-properly-ntpdate-or-ntpd/"></g:plusone>
			</div>
			<div style="float:left; width:95px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;">
			<a href="http://twitter.com/share" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://twitter.com/share', '');" class="twitter-share-button" data-url="http://ae.koroglu.org/how-to-sync-time-properly-ntpdate-or-ntpd/"  data-text="How to sync time properly: ntpdate or ntpd?" data-count="horizontal"></a>
			</div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><script type="in/share" data-url="http://ae.koroglu.org/how-to-sync-time-properly-ntpdate-or-ntpd/" data-counter="right"></script></div><div style="float:left; width:105px;padding-right:10px; margin:4px 4px 4px 4px;height:30px;"><a href="http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/how-to-sync-time-properly-ntpdate-or-ntpd/&media=" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://pinterest.com/pin/create/button/?url=http://ae.koroglu.org/how-to-sync-time-properly-ntpdate-or-ntpd/&amp;media=', '');" class="pin-it-button" count-layout="horizontal"></a></div>			
			</div><div style="clear:both"></div><div style="padding-bottom:4px;"></div>            </div>

			<p class="postmetadata">
				Posted in <b><a href="http://ae.koroglu.org/category/centos/" rel="category tag">CentOS</a>, <a href="http://ae.koroglu.org/category/linux/" rel="category tag">Linux</a>, <a href="http://ae.koroglu.org/category/lkd-eng/" rel="category tag">LKD-Eng</a></b>
                <b><a href="http://ae.koroglu.org/how-to-sync-time-properly-ntpdate-or-ntpd/#respond">&raquo; No Comments</a></b>
			</p>
        </div> 
    			<p align="center"><a href="http://ae.koroglu.org/page/2/" >&laquo; Previous Entries</a>  &nbsp; &nbsp; </p>

	<br /><br />
		</div>
</div>
<div id="sidebar">
<aside id="text-5" class="widget widget_text">			<div class="textwidget"><script src="http://about.me/embed/erdinc"></script></div>
		</aside><aside id="text-4" class="widget widget_text">			<div class="textwidget">    <form id="searchform" method="get" action="http://ae.koroglu.org">
        <div>
        <div id="side_search_text">Search : </div>
            <input type="text" name="s" id="search_box" size="18"/> <br />
            <input type="image" name="search" src="http://ae.koroglu.org/img/search.png" class="buttons_no_b" />
        </div>
    </form></div>
		</aside><aside id="text-2" class="widget widget_text">			<div class="textwidget"><a href="https://twitter.com/erdinc" onclick="__gaTracker('send', 'event', 'outbound-widget', 'https://twitter.com/erdinc', 'Tweets by @erdinc');" class="twitter-timeline"    data-widget-id="347681987491946497">Tweets by @erdinc</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script",  "twitter-wjs");</script><br><br></div>
		</aside><aside id="recent-comments-3" class="widget widget_recent_comments"><h3 class="widget-title">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">Dan Pritts</span> on <a href="http://ae.koroglu.org/alternative-way-to-daemonize-java-applications-on-red-hat-centos-linux/#comment-90">Alternative Way to Daemonize Java Applications on Red Hat / CentOS Linux</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://www.der-bode.de' rel='external nofollow' class='url'>Jörg</a></span> on <a href="http://ae.koroglu.org/using-nginx-as-load-balancer-for-tomcat/#comment-89">Using Nginx as Load Balancer for Tomcat</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://ae.koroglu.org' rel='external nofollow' class='url'>Ali Erdinç Köroğlu</a></span> on <a href="http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/#comment-88">How to install IBM Director Common Linux Agent 6.3.5 on CentOS6</a></li><li class="recentcomments"><span class="comment-author-link">Matt</span> on <a href="http://ae.koroglu.org/how-to-install-ibm-director-common-linux-agent-6-3-5-on-centos6/#comment-87">How to install IBM Director Common Linux Agent 6.3.5 on CentOS6</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://www.pc-freak.net' rel='external nofollow' class='url'>Georgi Georgiev</a></span> on <a href="http://ae.koroglu.org/using-nginx-as-load-balancer-for-tomcat/#comment-86">Using Nginx as Load Balancer for Tomcat</a></li></ul></aside><aside id="categories-3" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-52"><a href="http://ae.koroglu.org/category/centos/" >CentOS</a>
</li>
	<li class="cat-item cat-item-31"><a href="http://ae.koroglu.org/category/code/" >Coding</a>
</li>
	<li class="cat-item cat-item-23"><a href="http://ae.koroglu.org/category/gentoo/" >Gentoo</a>
</li>
	<li class="cat-item cat-item-20"><a href="http://ae.koroglu.org/category/geyiq/" >Geyiq</a>
</li>
	<li class="cat-item cat-item-17"><a href="http://ae.koroglu.org/category/ibm/" >IBM</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://ae.koroglu.org/category/life/" >Life</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://ae.koroglu.org/category/linux/" >Linux</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://ae.koroglu.org/category/lkd/" >LKD</a>
</li>
	<li class="cat-item cat-item-42"><a href="http://ae.koroglu.org/category/lkd-eng/" >LKD-Eng</a>
</li>
	<li class="cat-item cat-item-37"><a href="http://ae.koroglu.org/category/music/" >Music</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://ae.koroglu.org/category/pardus/" >Pardus</a>
</li>
		</ul>
</aside><aside id="archives-3" class="widget widget_archive"><h3 class="widget-title">Archives</h3>		<label class="screen-reader-text" for="archives-dropdown-3">Archives</label>
		<select id="archives-dropdown-3" name="archive-dropdown" onchange='document.location.href=this.options[this.selectedIndex].value;'>
			
			<option value="">Select Month</option>
				<option value='http://ae.koroglu.org/2014/12/'> December 2014 </option>
	<option value='http://ae.koroglu.org/2014/10/'> October 2014 </option>
	<option value='http://ae.koroglu.org/2014/07/'> July 2014 </option>
	<option value='http://ae.koroglu.org/2013/11/'> November 2013 </option>
	<option value='http://ae.koroglu.org/2013/08/'> August 2013 </option>
	<option value='http://ae.koroglu.org/2013/07/'> July 2013 </option>
	<option value='http://ae.koroglu.org/2013/06/'> June 2013 </option>
	<option value='http://ae.koroglu.org/2009/05/'> May 2009 </option>
	<option value='http://ae.koroglu.org/2009/02/'> February 2009 </option>
	<option value='http://ae.koroglu.org/2008/11/'> November 2008 </option>
	<option value='http://ae.koroglu.org/2008/10/'> October 2008 </option>
	<option value='http://ae.koroglu.org/2008/06/'> June 2008 </option>
	<option value='http://ae.koroglu.org/2008/04/'> April 2008 </option>
	<option value='http://ae.koroglu.org/2008/01/'> January 2008 </option>
	<option value='http://ae.koroglu.org/2007/12/'> December 2007 </option>
	<option value='http://ae.koroglu.org/2007/03/'> March 2007 </option>
	<option value='http://ae.koroglu.org/2007/02/'> February 2007 </option>
	<option value='http://ae.koroglu.org/2006/12/'> December 2006 </option>
	<option value='http://ae.koroglu.org/2006/10/'> October 2006 </option>
	<option value='http://ae.koroglu.org/2006/08/'> August 2006 </option>
	<option value='http://ae.koroglu.org/2006/06/'> June 2006 </option>
	<option value='http://ae.koroglu.org/2006/02/'> February 2006 </option>
	<option value='http://ae.koroglu.org/2005/09/'> September 2005 </option>
	<option value='http://ae.koroglu.org/2005/07/'> July 2005 </option>
	<option value='http://ae.koroglu.org/2005/05/'> May 2005 </option>
	<option value='http://ae.koroglu.org/2005/04/'> April 2005 </option>
	<option value='http://ae.koroglu.org/2005/03/'> March 2005 </option>
	<option value='http://ae.koroglu.org/2005/02/'> February 2005 </option>
	<option value='http://ae.koroglu.org/2004/11/'> November 2004 </option>
	<option value='http://ae.koroglu.org/2004/08/'> August 2004 </option>

		</select>
</aside><aside id="text-6" class="widget widget_text">			<div class="textwidget"><br><br></div>
		</aside><aside id="tag_cloud-2" class="widget widget_tag_cloud"><h3 class="widget-title">Tags</h3><div class="tagcloud"><a href='http://ae.koroglu.org/tag/agent/' class='tag-link-60' title='1 topic' style='font-size: 8pt;'>agent</a>
<a href='http://ae.koroglu.org/tag/bash/' class='tag-link-10' title='2 topics' style='font-size: 11.6pt;'>bash</a>
<a href='http://ae.koroglu.org/tag/bind/' class='tag-link-50' title='1 topic' style='font-size: 8pt;'>bind</a>
<a href='http://ae.koroglu.org/tag/blog/' class='tag-link-41' title='1 topic' style='font-size: 8pt;'>blog</a>
<a href='http://ae.koroglu.org/tag/centos-2/' class='tag-link-53' title='9 topics' style='font-size: 22pt;'>centos</a>
<a href='http://ae.koroglu.org/tag/chroot/' class='tag-link-48' title='3 topics' style='font-size: 14pt;'>chroot</a>
<a href='http://ae.koroglu.org/tag/comu/' class='tag-link-13' title='1 topic' style='font-size: 8pt;'>comu</a>
<a href='http://ae.koroglu.org/tag/cyprus/' class='tag-link-26' title='1 topic' style='font-size: 8pt;'>cyprus</a>
<a href='http://ae.koroglu.org/tag/director/' class='tag-link-59' title='1 topic' style='font-size: 8pt;'>director</a>
<a href='http://ae.koroglu.org/tag/dns/' class='tag-link-51' title='1 topic' style='font-size: 8pt;'>dns</a>
<a href='http://ae.koroglu.org/tag/fcgi/' class='tag-link-49' title='1 topic' style='font-size: 8pt;'>fcgi</a>
<a href='http://ae.koroglu.org/tag/fibonacci/' class='tag-link-11' title='1 topic' style='font-size: 8pt;'>fibonacci</a>
<a href='http://ae.koroglu.org/tag/flexform/' class='tag-link-57' title='1 topic' style='font-size: 8pt;'>flexform</a>
<a href='http://ae.koroglu.org/tag/free-software/' class='tag-link-16' title='6 topics' style='font-size: 19pt;'>free software</a>
<a href='http://ae.koroglu.org/tag/friends/' class='tag-link-18' title='1 topic' style='font-size: 8pt;'>friends</a>
<a href='http://ae.koroglu.org/tag/fun/' class='tag-link-4' title='1 topic' style='font-size: 8pt;'>fun</a>
<a href='http://ae.koroglu.org/tag/galatasaray/' class='tag-link-21' title='1 topic' style='font-size: 8pt;'>galatasaray</a>
<a href='http://ae.koroglu.org/tag/gentoo/' class='tag-link-23' title='2 topics' style='font-size: 11.6pt;'>Gentoo</a>
<a href='http://ae.koroglu.org/tag/geyiq/' class='tag-link-20' title='1 topic' style='font-size: 8pt;'>Geyiq</a>
<a href='http://ae.koroglu.org/tag/hardware/' class='tag-link-35' title='2 topics' style='font-size: 11.6pt;'>hardware</a>
<a href='http://ae.koroglu.org/tag/hpc/' class='tag-link-24' title='3 topics' style='font-size: 14pt;'>hpc</a>
<a href='http://ae.koroglu.org/tag/ibm/' class='tag-link-17' title='2 topics' style='font-size: 11.6pt;'>IBM</a>
<a href='http://ae.koroglu.org/tag/internet/' class='tag-link-27' title='1 topic' style='font-size: 8pt;'>internet</a>
<a href='http://ae.koroglu.org/tag/java/' class='tag-link-58' title='2 topics' style='font-size: 11.6pt;'>java</a>
<a href='http://ae.koroglu.org/tag/linksys/' class='tag-link-29' title='1 topic' style='font-size: 8pt;'>linksys</a>
<a href='http://ae.koroglu.org/tag/linux-2/' class='tag-link-56' title='5 topics' style='font-size: 17.6pt;'>linux</a>
<a href='http://ae.koroglu.org/tag/load-balancing/' class='tag-link-46' title='1 topic' style='font-size: 8pt;'>load-balancing</a>
<a href='http://ae.koroglu.org/tag/mathematics/' class='tag-link-9' title='1 topic' style='font-size: 8pt;'>mathematics</a>
<a href='http://ae.koroglu.org/tag/music/' class='tag-link-37' title='1 topic' style='font-size: 8pt;'>Music</a>
<a href='http://ae.koroglu.org/tag/neu/' class='tag-link-25' title='3 topics' style='font-size: 14pt;'>neu</a>
<a href='http://ae.koroglu.org/tag/nginx/' class='tag-link-43' title='4 topics' style='font-size: 16pt;'>nginx</a>
<a href='http://ae.koroglu.org/tag/ntp/' class='tag-link-54' title='2 topics' style='font-size: 11.6pt;'>ntp</a>
<a href='http://ae.koroglu.org/tag/origami/' class='tag-link-40' title='1 topic' style='font-size: 8pt;'>origami</a>
<a href='http://ae.koroglu.org/tag/pardus/' class='tag-link-15' title='4 topics' style='font-size: 16pt;'>Pardus</a>
<a href='http://ae.koroglu.org/tag/php/' class='tag-link-32' title='2 topics' style='font-size: 11.6pt;'>php</a>
<a href='http://ae.koroglu.org/tag/php-fpm/' class='tag-link-47' title='1 topic' style='font-size: 8pt;'>php-fpm</a>
<a href='http://ae.koroglu.org/tag/redhat/' class='tag-link-22' title='1 topic' style='font-size: 8pt;'>Red Hat</a>
<a href='http://ae.koroglu.org/tag/rss/' class='tag-link-33' title='1 topic' style='font-size: 8pt;'>rss</a>
<a href='http://ae.koroglu.org/tag/seminar/' class='tag-link-28' title='4 topics' style='font-size: 16pt;'>seminar</a>
<a href='http://ae.koroglu.org/tag/supervisord/' class='tag-link-64' title='3 topics' style='font-size: 14pt;'>supervisord</a>
<a href='http://ae.koroglu.org/tag/time/' class='tag-link-55' title='1 topic' style='font-size: 8pt;'>time</a>
<a href='http://ae.koroglu.org/tag/tomcat/' class='tag-link-44' title='1 topic' style='font-size: 8pt;'>tomcat</a>
<a href='http://ae.koroglu.org/tag/wireless/' class='tag-link-30' title='1 topic' style='font-size: 8pt;'>wireless</a>
<a href='http://ae.koroglu.org/tag/wordpress/' class='tag-link-34' title='2 topics' style='font-size: 11.6pt;'>wordpress</a>
<a href='http://ae.koroglu.org/tag/xfce/' class='tag-link-39' title='1 topic' style='font-size: 8pt;'>xfce</a></div>
</aside>
		<ul id="sidebar_main_menu">

    
   
            
					<li id="meta"><h2> Meta:</h2>
						  <ul class="side_bar_items">
														<li><a href="http://ae.koroglu.org/wp-login.php">Log in</a></li>
							<li><a href="feed:http://ae.koroglu.org/feed/" title="Syndicate this site using RSS"><abbr title="Really Simple Syndication">RSS</abbr></a></li>
							<li><a href="feed:http://ae.koroglu.org/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
													  </ul>
					</li>
		  </ul>
<p align="center">
<a href="http://www.fsf.org/register_form?referrer=5206"><img src="/img/fsf.png" alt="[FSF Associate Member]" width="88" height="31" /></a><br><br>
<img src="/img/lkd.png" alt="Linux Kullanıcıları Derneği Üyesi" /></a><br><br>
<img src="/img/rhce.png" alt="Red Hat Certified Engineer"><br><br>
<img src="/img/rhcva.png" alt="Red Hat Certified Virtualization Administrator">
</div>



<script type='text/javascript' src='http://platform.twitter.com/widgets.js?ver=4.3.1'></script>
<script type='text/javascript' src='http://apis.google.com/js/plusone.js?ver=4.3.1'></script>
<script type='text/javascript' src='http://platform.linkedin.com/in.js?ver=4.3.1'></script>
<script type='text/javascript' src='http://assets.pinterest.com/js/pinit.js?ver=4.3.1'></script>
<script type='text/javascript' src='http://ae.koroglu.org/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/ae.koroglu.org\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ..."};
/* ]]> */
</script>
<script type='text/javascript' src='http://ae.koroglu.org/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.3'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var JQLBSettings = {"fitToScreen":"0","resizeSpeed":"400","displayDownloadLink":"0","navbarOnTop":"0","loopImages":"","resizeCenter":"","marginSize":"","linkTarget":"_self","help":"","prevLinkTitle":"previous image","nextLinkTitle":"next image","prevLinkText":"\u00ab Previous","nextLinkText":"Next \u00bb","closeTitle":"close image gallery","image":"Image ","of":" of ","download":"Download","jqlb_overlay_opacity":"80","jqlb_overlay_color":"#000000","jqlb_overlay_close":"1","jqlb_border_width":"10","jqlb_border_color":"#ffffff","jqlb_border_radius":"0","jqlb_image_info_background_transparency":"100","jqlb_image_info_bg_color":"#ffffff","jqlb_image_info_text_color":"#000000","jqlb_image_info_text_fontsize":"10","jqlb_show_text_for_image":"1","jqlb_next_image_title":"next image","jqlb_previous_image_title":"previous image","jqlb_next_button_image":"http:\/\/ae.koroglu.org\/wp-content\/plugins\/wp-lightbox-2\/styles\/images\/next.gif","jqlb_previous_button_image":"http:\/\/ae.koroglu.org\/wp-content\/plugins\/wp-lightbox-2\/styles\/images\/prev.gif","jqlb_maximum_width":"","jqlb_maximum_height":"","jqlb_show_close_button":"1","jqlb_close_image_title":"close image gallery","jqlb_close_image_max_heght":"22","jqlb_image_for_close_lightbox":"http:\/\/ae.koroglu.org\/wp-content\/plugins\/wp-lightbox-2\/styles\/images\/closelabel.gif","jqlb_keyboard_navigation":"1","jqlb_popup_size_fix":"0"};
/* ]]> */
</script>
<script type='text/javascript' src='http://ae.koroglu.org/wp-content/plugins/wp-lightbox-2/wp-lightbox-2.min.js?ver=1.3.4.1'></script>
</body>
</html>
